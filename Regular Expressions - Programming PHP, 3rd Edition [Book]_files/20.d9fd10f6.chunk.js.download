(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{I4Wp:function(e,t,n){},IuzP:function(e,t,n){},JhcM:function(e,t,n){},KA4J:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o});var a=n("efbE"),i=["en","es","pt","id","fr","ar","tr","th","vi","de","it","ja","zh-CN","zh-TW","ru","ko","pl","nl","ro","hu","sv","cs","hi","bn","da","fa","tl","fi","iw","ms","no","uk"],c=function localeToGiphyLang(e){switch(e){case"de-DE-formal":return"de";case"zh":return"zh-CN";case"zh-HK":return"zh-TW";case"pt-BR":return"pt"}return i.includes(e)?e:"en"},r=function getTrendingGiphys(e){return a.i.get("/trending",{params:{limit:e,rating:"pg"}})},o=function getSearchGiphys(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).locale;return a.i.get("/search",{params:{limit:t,q:e,lang:c(n),rating:"pg"}})}},MWt3:function(e,t,n){},"PGb/":function(e,t,n){},UXBQ:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return c});var a=n("efbE"),i=function uploadAttachment(e,t){var n=new FormData;return n.append("conversationId",t),n.append("file",e),a.a.post("/attachments",n)},c=function fetchAttachments(e,t){return a.a.get("/attachments",{params:{id:e},cancelToken:t})}},dZmz:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("efbE"),i=n("rAc1"),c=n("l6A5"),r=function urlIdentity(e){return Object(i.a)(e)},o=(Object(c.a)(r,function(e){return a.l.get("/",{params:{url:encodeURI(e)}})}),Object(c.a)(r,function(e){return a.k.get("/",{params:{url:e,iframe:1,omit_script:1,media:1}})}))},fTFZ:function(e,t,n){"use strict";var a=n("nfbA"),i=n("WwEg"),c=n("s8DI"),r=n("O94r"),o=n.n(r),s=n("7IKl"),l=n("lE29"),u=n("ERkP"),d=n.n(u),m=n("liE7"),f=n("uDfI"),g=(n("I4Wp"),function AgentTypingIndicator(){var e=Object(m.useTranslation)().t,t=Object(l.a)().widgetBackgroundAlpha,n=Object(f.c)(function(e){return e.conversations.typingIndicators[e.conversations.activeConversation]||{}}),a=n.isTyping,i=void 0!==a&&a,c=n.userId,r=Object(s.a)(c);return i?d.a.createElement("p",{style:t,className:"agent-typing-indicator"},e("status.agentTyping",{agent:r})):null}),b=n("ZGTz"),p=n("oImb"),v=n("+Kbs"),h=n("908p"),E=n("nQD+"),O=n("HXmn"),j=n("mZ4K"),w=n("P+wr"),A=n("6wvX"),I=n("jITz"),y=n("rAhV"),C=n("6rzO"),k=n("58kB"),N=n("uQkC"),T=n("hNWd"),L=n("+oIK"),R=n("LVcX"),S=n("U505"),U=n("ovDp"),B=n("vwUF"),M=n("0lfv");n("IuzP");n.d(t,"a",function(){return z});var z,D="GIF",P="TEXT",_=function validateMessageText(e){return e&&e.trim().length>0};!function(e){e[e.AVAILABLE=0]="AVAILABLE",e[e.UNAVAILABLE=1]="UNAVAILABLE",e[e.UNAVAILABLE_BUTTONS=2]="UNAVAILABLE_BUTTONS"}(z||(z={}));t.b=function Composer(e){var t=e.onSubmit,n=e.activeConversationId,r=e.state,s=void 0===r?z.AVAILABLE:r,x=e.disabled,V=void 0!==x&&x,F=Object(u.useRef)(null),G=Object(u.useRef)(null),H=Object(u.useState)(""),K=Object(c.a)(H,2),W=K[0],Z=K[1],J=Object(u.useState)(!1),X=Object(c.a)(J,2),q=X[0],Q=X[1],Y=Object(u.useState)([]),$=Object(c.a)(Y,2),ee=$[0],te=$[1],ne=Object(f.c)(function(e){return e.view}).matchedHours,ae=Object(f.c)(function(e){return e.conversations.attachments}),ie=Object(f.c)(function(e){return e.session.endUser.id}),ce=Object(f.c)(function(e){return Object(R.a)(!1,["embed","configuration","theme"],e)}).allowEndUserFileUpload,re=Object(m.useTranslation)().t,oe=Object(A.a)(!0),se=Object(y.a)().markAsRead,le=Object(j.a)(),ue=Object(l.a)().activeColor,de=Object(k.a)(le).recipient,me=Object(C.a)({inputRef:F}),fe=me.pastedFiles,ge=me.clearFiles,be=Object(I.a)({targetKey:"Enter"}),pe=Object(N.a)({activeConversationId:n}),ve=pe.sendTypingStarted,he=pe.sendTypingFinished,Ee=Object(w.a)({activeConversation:n,onAttachmentUploadComplete:Object(u.useCallback)(function onAttachmentUploadComplete(e){te(function(t){return[].concat(Object(i.a)(t),Object(i.a)(e))}),ge()},[])}),Oe=Ee.attachmentState,je=Ee.uploadAttachments,we=Ee.resetAttachmentState,Ae=s===z.AVAILABLE,Ie=Object(U.a)({onDrop:je,disabled:V||!Ae||!ce}),ye=Ie.getRootProps,Ce=Ie.getInputProps,ke=Ie.open,Ne=_(W)||ee.length,Te=Oe===B.b.PENDING,Le=Oe===B.b.ERROR||Oe===B.b.SIZE_ERROR;var Re=Object(u.useCallback)(function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P,c=ee?{attachments:ee}:{},r=n?{}:{sentWelcomeMessage:ne,sentOfflineHours:!ne};he();var o=i===P?Object(M.m)(e):e;t({message:Object(L.a)(Object(a.a)({message:o,activeConversation:n||null,authorId:ie,attributes:r},c))}),Z(""),te([]),we()},[n,ie,ne,t,we,he,ee]);Object(u.useEffect)(function(){ce?fe.length&&!Te&&je(fe):ge()},[ce,Te,ge,fe,je]),Object(u.useEffect)(function(){be&&(_(W)||ee.length)&&Re(W,P)},[be,W,Re,ee.length]),Object(u.useEffect)(function(){n&&Z("")},[n]);var Se=Object(u.useMemo)(function(){return Ae?re("composer.replyToPlaceholder",{name:de.name}):re(s===z.UNAVAILABLE_BUTTONS?"composer.chooseOptionAbove":"composer.replyDisabled")},[Ae,de.name,s,re]),Ue=ce&&!!n,Be=!Ne&&!!n,Me=!!Ne,ze=Ue||Me||Be,De=V||Te;return d.a.createElement(d.a.Fragment,null,(ee.length||Te||Le)&&d.a.createElement("div",{className:"drift-widget-composer--pre-message-attachments"},Le&&d.a.createElement("div",{className:"drift-widget-attachment-send-status drift-widget-attachment-send-status--failed"},d.a.createElement("span",{className:"drift-widget-attachment-send-status--text"},re(Oe===B.b.SIZE_ERROR?"attachment.errorSize":"attachment.error")),d.a.createElement(E.a,{onClick:function onClick(){we(),ge()},className:"drift-widget-attachment-send-status--close",disabled:V},d.a.createElement(v.j,{width:10,height:10}))),(ee.length||Te)&&d.a.createElement("ul",{className:"drift-widget-composer-attachment-preview-list"},[].concat(Object(i.a)(ee),Object(i.a)(Te?[{pending:!0}]:[])).map(function(e,t){return d.a.createElement("li",{key:ae[e]?ae[e].id:"file-upload-loader"},ae[e]&&!ae.pending&&d.a.createElement(E.a,{"aria-label":"Remove attachment ".concat(t+1),onClick:function onClick(){return function onRemoveUploadedAttachment(e){te(function(t){return Object(S.a)([e],t)})}(e)},disabled:V},d.a.createElement(v.j,{width:6,height:6})),ae[e]&&!ae.pending?function resolveAttachmentTypeComponent(e){return e?e.mimeType.includes("image")?d.a.createElement("div",{className:"drift-widget-composer-attachment-preview-list-image-wrapper"},d.a.createElement("img",{alt:e.fileName,src:e.publicUrl})):d.a.createElement("div",{className:"drift-widget-composer-attachment-non-image",title:e.filename},d.a.createElement("strong",null,e.fileName),d.a.createElement(v.k,{width:16,height:16})):null}(ae[e]):d.a.createElement(O.a,{size:"small",className:"drift-widget-composer-attachment-loader"}))}))),d.a.createElement("div",Object.assign({},ye({onClick:function onClick(e){return e.stopPropagation()}}),{className:o()("drift-widget-composer--default",{"drift-widget-composer--mobile":oe})}),ce&&d.a.createElement("input",Ce()),d.a.createElement(g,null),d.a.createElement("div",{className:"drift-widget-composer--text-area"},d.a.createElement("pre",null,Ae&&W.length?W:" "),d.a.createElement("textarea",{className:"drift-widget-input",ref:F,placeholder:Se,value:Ae?W:"",onChange:function onTextareaChange(e){be||fe.length||(Z(e.target.value),ve())},onFocus:function onComposerFocus(){se(n)},"aria-label":"message composer",maxLength:4096,disabled:V||!Ae||!!fe.length,tabIndex:0}),Ae&&!oe&&d.a.createElement("button",{ref:G,className:"drift-widget-composer-emoji-toggle",onClick:function onEmojiButtonClick(){s!==z.AVAILABLE||V||Q(!q)},disabled:V,"aria-expanded":q,"aria-label":"emojis"},d.a.createElement(T.a,null))),!oe&&d.a.createElement(b.a,{open:q,onAddEmoji:function onAddEmoji(e){Q(!q),Ae&&!V&&(Z(e),F.current&&F.current.focus())},onClickOutside:function onEmojiPickerClickOutside(e){G.current&&G.current.contains(e.target)||Q(!1)}}),Ae&&ze&&d.a.createElement("div",{className:"drift-widget-composer-actions"},Ue&&d.a.createElement("button",{onClick:ke,"aria-label":"add an attachment",disabled:V},d.a.createElement(v.a,null)),Be&&d.a.createElement(p.a,{onAddGiphy:function onAddGiphy(e){return Re(e,D)},disabled:V}),Me&&d.a.createElement("button",{className:o()("drift-widget-composer-send-button",{"drift-widget-composer-send-button--disabled":De}),"aria-label":"send message",onClick:function onClick(){return Re(W,P)},disabled:V||Te},d.a.createElement(h.a,{color:"#".concat(ue)})))))}},jKoD:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("efbE"),i=function recordConsent(e,t){return a.f.post("/end_users/".concat(e,"/consent"),{consentId:"has_consent",message:t})}},pgTp:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s});var a=n("WwEg"),i=n("efbE"),c=n("JBtm"),r=n.n(c),o=function fetchAgentAvailability(e){var t=e.agentId,n=e.additionalAgents,c=void 0===n?[]:n,o=e.meetingType,s=e.start,l=e.orgMeetingType;return i.o.get("scheduling/".concat(t,"/availability"),{params:{meetingType:o,start:s,additionalAgents:Object(a.a)(c),orgMeetingType:l},paramsSerializer:function paramsSerializer(e){return r.a.stringify(e)}})},s=function scheduleMeeting(e){var t=e.endUserTimeZone,n=e.availabilitySlot,a=e.agentId,c=e.meetingType,r=e.meetingSource,o=e.conversationId,s=e.bookedByUserId,l=e.orgMeetingType;return i.o.post("scheduling/".concat(a,"/schedule"),n,{params:{conversationId:o,meetingSource:r,meetingType:c,timeZone:t,bookedByUserId:s,orgMeetingType:l}})}},"tGI+":function(e,t,n){"use strict";var a=n("NJA7"),i=n("fw6E"),c=n("K7i0"),r=n("+oIK"),o=n("ERkP"),s=n.n(o),l=n("uDfI");t.a=function AgentRequestedOptions(e){var t=e.message,n=t.attributes,o=t.id,u=t.conversationId,d=Object(l.b)(),m=Object(l.c)(function(e){return e.session}).endUser,f=Object(i.a)().conversationHistoryOpen,g=function doSendMessage(e){var n=e.label;return function(){var e=Object(r.a)({message:n,activeConversation:u,authorId:m.id,attributes:{buttonClicked:!0,questionId:t.attributes.questionId}});d(Object(c.m)({message:e}))}};return s.a.createElement("ul",{className:"drift-widget-message-group drift-widget-message-group-type--END_USER"},s.a.createElement("li",{className:"drift-widget-message drift-widget-message-sender--END_USER"},s.a.createElement("div",{className:"drift-bot-buttons--set"},n.buttons.map(function(e,t){return s.a.createElement(a.a,{onClick:g(e),key:"bot-button-".concat(o,"-").concat(t),invertOnHover:!0,disabled:f,"aria-label":"".concat(e.label," - Click to respond with this message")},e.label)}))))}},vkRn:function(e,t,n){"use strict";var a=n("O94r"),i=n.n(a),c=n("noex"),r=n("yEsl"),o=n("8pzW"),s=n("fw6E"),l=n("hhdZ"),u=n("rAhV"),d=n("58kB"),m=n("6fy/"),f=n("SsZN"),g=n("K7i0"),b=n("da4L"),p=n("LVcX"),v=n("i9gz"),h=n("ERkP"),E=n.n(h),O=n("uDfI"),j=n("A5mO"),w=(n("JhcM"),function ConversationHistoryListItem(e){var t=e.conversation,n=void 0===t?{}:t,a=Object(s.a)().onToggleConversationHistory,i=Object(O.b)(),w=Object(m.a)(),A=Object(h.useMemo)(function(){return Object(p.a)(null,["conversation","id"],n)},[n]),I=Object(l.a)(A),y=Object(h.useMemo)(function(){return Object(p.a)(null,["authorId"],I)},[I]),C=Object(d.a)(y).recipient,k=Object(b.h)(I),N=Object(u.a)().markAsRead;if(Object(v.a)(I))return null;var T=I.createdAt,L=I.attributes,R=void 0===L?{}:L,S=Object(j.a)(T).isAfter(j.a.today())?Object(j.a)(T).unixFmt(o.c):Object(j.a)(T).unixFmt(o.a),U=k?w.name:C.name,B="Conversation with ".concat(C.name).concat(R.preview?" - ".concat(k?"You":"",': "').concat(R.preview,'"'):"",", ").concat(S," - Click to open");return E.a.createElement("li",{className:"drift-widget-conversation-list-item"},E.a.createElement("button",{onClick:function toggleConversation(e){return function(){A&&(N(A),a(!1),i(Object(g.n)({conversationId:e})),Object(f.f)(e))}}(n.conversation.id),"aria-label":B},k?E.a.createElement(r.a,{size:"SMALL",className:"drift-widget-conversation-list-item-avatar",image:w.avatar}):E.a.createElement(c.a,{size:"SMALL",className:"drift-widget-conversation-list-item-avatar",image:C.avatarUrl,id:y}),E.a.createElement("div",{className:"drift-widget-conversation-list-item-content"},E.a.createElement("h2",null,U),E.a.createElement("span",{className:"drift-widget-conversation-list-item-time"},S),E.a.createElement("p",{className:"drift-widget-conversation-list-item-last-message"},R.preview))))}),A=n("DboL"),I=n("9xv8");n("PGb/"),t.a=function ConversationHistory(){var e=Object(s.a)().conversationHistoryOpen,t=Object(O.c)(function(e){return e.conversations.conversations}),n=Object(h.useMemo)(function(){return Object(I.b)(Object(A.a)(t),"updatedAt")},[t]),a=Object(h.useMemo)(function(){return E.a.createElement("ul",{className:"drift-widget-conversation-history-list"},n.map(function(e){return E.a.createElement(w,{key:e.conversation.id,conversation:e})}))},[n]);return E.a.createElement("div",{className:i()("drift-widget-conversation-history",{"drift-widget-conversation-history--open":e}),"aria-hidden":!e},e&&a)}},xyhj:function(e,t,n){"use strict";var a=n("lE29"),i=n("ERkP"),c=n.n(i),r=n("uDfI"),o=n("PjZB"),s=n("7oto");n("MWt3");t.a=function CtaButton(e){var t=e.ctaUrl,n=e.ctaCopy,i=e.ctaType,l=e.onClick,u=Object(a.a)().backgroundStyles,d=Object(r.c)(function(e){return e.campaigns.activeCampaign}),m=function onCtaClick(e){i===o.a.CHAT_RESPONSE?Object(s.a)({topic:"drift-api:open-chat"}):i===o.a.SCHEDULE_MEETING&&Object(s.a)({topic:"drift-api:schedule-meeting",message:{scheduleMeetingWith:d.attributes.senderId,options:{activeCampaign:d}}}),l&&l(e)};return i===o.a.LINK_TO_URL?c.a.createElement("div",{className:"drift-widget-announcement-cta drift-widget-announcement-cta-link-wrapper",style:u},c.a.createElement("a",{className:"drift-widget-announcement-cta-link",href:t,onClick:m,target:"_blank",rel:"noopener noreferrer","aria-describedby":"drift-widget-announcement-cta-description"},n),c.a.createElement("span",{hidden:!0,id:"drift-widget-announcement-cta-description"},n+"; opens an external site in a new window")):c.a.createElement("button",{className:"drift-widget-announcement-cta",onClick:m,style:u},n)}}}]);