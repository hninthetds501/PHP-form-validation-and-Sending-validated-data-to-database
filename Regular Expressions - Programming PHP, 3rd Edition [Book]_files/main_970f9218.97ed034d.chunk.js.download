(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"+Zvl":function(e,t,n){"use strict";var r=n("QtlZ"),a=n("H/qh"),c=n("7oto"),i=["__DRIFT_WIDGET_RECEIVE_CHANNEL","REPLACE_STATE"];t.a=function actionSyncMiddleware(){return function(e){return function(t){return t._foreignDispatch||Object(a.a)(t.type,i)||Object(c.a)({topic:"".concat(r.a.name,":action-dispatch"),message:{action:t}}),e(t)}}}},"+oIK":function(e,t,n){"use strict";n.d(t,"a",function(){return E}),n.d(t,"b",function(){return p});var r=n("nfbA"),a=n("LeJ0"),c=n("QtlZ"),i=n("LVcX"),o=n("hm8b"),u=n("i9gz"),s=n("MFhO"),d=n("PjZB"),l=n("0lfv"),f={widgetVersion:2,widgetRelease:"LOCAL"!==a.a.ENV?"___RELEASE_ID":"local"},E=function createMessage(e){var t=e.message,n=void 0===t?"":t,a=e.activeConversation,E=e.attributes,p=void 0===E?{}:E,b=e.isMetaMessage,O=void 0!==b&&b,g=e.authorId,I=e.attachments,m=void 0===I?[]:I,_=e.preMessages,j=void 0===_?[]:_,A=e.inboxId,C=e.type,S=void 0===C?d.e.CHAT:C,h=e.contentType,T=void 0===h?d.c.CHAT:h,y=c.a.getState(),N=Object(i.a)({context:{}},["session"],y),R=Object(i.a)(d.b.LEAD,["session","endUser","type"],y),x=Object(i.a)(null,["campaigns","activeCampaign"],y),w=Object(i.a)({},["embed","configuration"],y),M=w.autoAssigneeId,k=w.profileMode,D=void 0!==k&&k,P=v(A),V=Object(o.a)(j)||Object(u.a)(j)?function _applyPremessagesForMessage(e,t){var n=Object(i.a)({},["embed","configuration"],c.a.getState()),r=n.autoAssigneeId,a=n.profileMode,o=void 0!==a&&a,u=n.team,d=n.theme,l=void 0===d?{}:d,f=Object(i.a)(null,["attributes","campaignDisplayType"],t)===s.a.WELCOME_MESSAGE,E=Object(i.a)("",["attributes","message"],t),p=Object(i.a)(null,["attributes","senderId"],t),b=[];return e?b:(o&&r&&b.push({body:l.welcomeMessage,sender:u.find(function(e){return e.id===r})}),f&&b.push({body:E,sender:u.find(function(e){return e.id===p})}),b)}(a,x):j;return{attachments:m,conversationId:a,body:n,type:S,contentType:T,authorId:g,authorType:R,inboxId:P,attributes:Object(r.a)(Object(r.a)({},p),{},{widgetGuid:Object(l.n)(),isMetaMessage:O,generatedAt:Date.now().valueOf(),autoAssigneeId:M,profileMode:D,preMessages:V},f),context:{userAgent:N.context.userAgent,timezone:N.context.timezone,locale:N.context.locale,page:N.context.page}}},p=function createPreMessagesForCampaign(e){var t=e.body,n=e.attributes,r=(n=void 0===n?{}:n).title,a=void 0===r?null:r,c=n.senderId,i=void 0===c?null:c,o=n.noSenderId,u=void 0!==o&&o,d=n.automaticSender,f=void 0!==d&&d,E=n.campaignDisplayType,p=(void 0===E?null:E)===s.a.WELCOME_MESSAGE,v=b(i,u,f),O=[];return a&&!p&&O.push({id:Object(l.n)(),body:a,sender:v}),t&&O.push({id:Object(l.n)(),body:t,sender:v}),O},b=function getSender(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t)return null;var r=Object(i.a)({},["embed","configuration"],c.a.getState()),a=r.autoAssigneeId,o=r.team;return n&&a?o.find(function(e){return e.id===a}):o.find(function(t){return t.id===e})},v=function resolveInboxIdForMessage(e){var t=c.a.getState(),n=Object(i.a)({},["embed","configuration"],t).inboxId;if(!Object(o.a)(e))return e;var r=Object(i.a)(null,["conversations","activeConversation"],t),a=Object(i.a)(null,["conversations","conversations",r,"conversation"],t);return Object(o.a)(a)?n:a.inboxId}},"/7QA":function(e,t,n){"use strict";n.r(t);n("pNMO"),n("DEfu"),n("I9xj"),n("kSko"),n("zKZe"),n("uL8W"),n("Eqjn"),n("HRxU"),n("eoL8"),n("5xtp"),n("T63A"),n("3KgV"),n("wfmh"),n("5DmW"),n("27RR"),n("cDke"),n("NBAS"),n("Kxld"),n("yQYn"),n("4h0Y"),n("5D5o"),n("tkto"),n("v5b1"),n("W/eh"),n("zuhW"),n("r5Og"),n("ExoC"),n("07d7"),n("B6y2"),n("5s+n"),n("p532"),n("PKPk"),n("66V8"),n("8go2"),n("DrvE"),n("kCkZ"),n("3bBZ");var r=n("GMUs"),a=n("Nlet");Object(r.a)(function kickOff(){Object(a.a)(),Promise.all([n.e(32),n.e(30),n.e(22),n.e(28)]).then(n.bind(null,"V+70")).catch(function(e){return console.warn("loading root widget failed",e)})})},"0lfv":function(e,t,n){"use strict";n.d(t,"d",function(){return j}),n.d(t,"h",function(){return A}),n.d(t,"n",function(){return C}),n.d(t,"k",function(){return S}),n.d(t,"e",function(){return h}),n.d(t,"a",function(){return T}),n.d(t,"b",function(){return y}),n.d(t,"g",function(){return N}),n.d(t,"i",function(){return R}),n.d(t,"m",function(){return x}),n.d(t,"c",function(){return w}),n.d(t,"f",function(){return M}),n.d(t,"l",function(){return k}),n.d(t,"j",function(){return D});var r=n("s8DI"),a=n("WwEg"),c=n("mj2O"),i=n.n(c),o=n("7SM1"),u=n("LeJ0"),s=n("yKvL"),d=n("woTc"),l=n("weY7"),f=n("dMPp"),E=n("KwHb"),p=n("LVcX"),b=n("hm8b"),v=n("i9gz"),O=n("BMKr"),g="PRODUCTION"!==u.a.ENV,I="PRODUCTION"!==u.a.ENV,m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},_=function(){var e=Object(o.a)(i.a.mark(function _callee(e){return i.a.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){try{setTimeout(function(){t("")},e)}catch(r){n("Pause timeout failed")}}));case 1:case"end":return t.stop()}},_callee)}));return function pause(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(o.a)(i.a.mark(function _callee2(e,t){return i.a.wrap(function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_(t);case 2:return n.next=4,e();case 4:case"end":return n.stop()}},_callee2)}));return function delay(t,n){return e.apply(this,arguments)}}(),A=function interval(e,t){var n=null,r=function run(){n=window.setTimeout(a,t)},a=function onTimeout(){e&&e(),r()};return r(),function(){n&&(window.clearTimeout(n),n=null)}},C=function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},S=function log(e){var t,n=e.type,r=void 0===n?"log":n,c=e.data;g&&(t=console)[r].apply(t,["".concat(u.a.PROJECT_NAMESPACE,"::")].concat(Object(a.a)(c)))},h=function error(e,t){var error=e instanceof Error?e:new Error(e);Object(O.a)(error,t),function errorHandler(e){if(I||error instanceof s.a)throw e;S({type:"warn",data:[e.message]})}(error)},T=function byId(e){return Object(d.a)(Object(l.a)(Object(f.a)("id"),e),e)},y=function chunkValues(e,t){var n=Object.entries(t).map(function(e){var t=Object(r.a)(e,2);t[0];return t[1]});return Object(E.a)(e,n)},N=function getTextFromHTML(e){var t=(new DOMParser).parseFromString(e,"text/html");return Object(p.a)("",["body","textContent"],t)},R=function isMobile(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return/iPhone|iPod|Android/i.test(e)||t&&/iPad/i.test(e)},x=function sanitizeText(e){return e.replace(/[&<>"'/]/gi,function(e){return m[e]})},w=function debounce(e,t,n){var r=null;return function(){for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];var o=n&&!r,u=function later(){r=null,n||e.apply(this,c)};r?(clearTimeout(r),r=setTimeout(u,t)):r=setTimeout(u,t),o&&e.apply(void 0,c)}},M=function getRandomIndex(e,t){return function seededRandom(e){return function(){return 1073741823&(1103515245*e+12345)%2147483647}}(t)()%e},k=function noop(){},D=function isNilOrEmpty(e){return Object(b.a)(e)||Object(v.a)(e)}},"4c+F":function(e,t,n){"use strict";var r=n("mj2O"),a=n.n(r),c=n("7SM1"),i=n("ka07"),o=n("uIJS"),u=n("LvsC"),s=n("qytN"),d=n("7jL2"),l=n("vEWT"),f=n("0lfv"),E=n("7BJg");function _createSuper2(e){return function(){var t,n=Object(d.a)(e);if(function isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var r=Object(d.a)(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return Object(s.a)(this,t)}}var p=5e3,b=new(function(e){Object(u.a)(MetricEventBuffer,e);var t=_createSuper2(MetricEventBuffer);function MetricEventBuffer(){var e;return Object(o.a)(this,MetricEventBuffer),(e=t.call(this,p))._publishBuffer=function(){e._events.length&&(Object(l.a)(e._events).catch(function(e){Object(f.k)({type:"warn",data:["Bulk Metrics Failure"]})}),e._resetBuffer())},e}return MetricEventBuffer}(E.a)),v=n("nfbA"),O=n("QtlZ"),g=n("YvIt"),I=n("Nlet"),m=n("t8ds");function usageEventBuffer_createSuper2(e){return function(){var t,n=Object(d.a)(e);if(function isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var r=Object(d.a)(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return Object(s.a)(this,t)}}var _=2e3,j=new(function(e){Object(u.a)(UsageMetricEventBuffer,e);var t=usageEventBuffer_createSuper2(UsageMetricEventBuffer);function UsageMetricEventBuffer(){var e;return Object(o.a)(this,UsageMetricEventBuffer),(e=t.call(this,_))._publishBuffer=Object(c.a)(a.a.mark(function _callee(){var t;return a.a.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return e._events.length||Promise.reject(void 0),n.next=3,e._hydrateEvents();case 3:return t=n.sent,n.next=6,Object(l.b)(t).catch(function(e){Object(f.k)({type:"warn",data:["Bulk Usage Metrics Failure"]})});case 6:e._resetBuffer();case 7:case"end":return n.stop()}},_callee)})),e._hydrateEvents=Object(c.a)(a.a.mark(function _callee2(){var t,n,r,c,i,o,u,s,d,l;return a.a.wrap(function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.b.get(g.a);case 2:return t=a.sent,n=t.data,r=O.a.getState(),c=r.session,i=r.embed,o=r.metrics,u=Object(f.i)(c.context.userAgent),s=Object(I.c)(),d=o.loadCostInBytes,l=e._events.map(function(e){return"loaded"===e.eventName&&(e.attributes.loadSizeInBytes=d),{eventName:"[V2] - ".concat(e.eventName),embedId:i.id,sessionId:n,instanceId:c.instanceId,attributes:Object(v.a)(Object(v.a)({},e.attributes),{},{isMobile:u})}}),a.abrupt("return",Promise.resolve({id:Object(f.n)(),events:l,timestamp:Date.now(),context:{locale:s.locale,timezone:s.timezone,url:s.url}}));case 10:case"end":return a.stop()}},_callee2)})),e}return UsageMetricEventBuffer}(E.a));n.d(t,"c",function(){return A}),n.d(t,"a",function(){return C}),n.d(t,"d",function(){return S}),n.d(t,"b",function(){return T});var A=function(){var e=Object(c.a)(a.a.mark(function _callee(e,t){return a.a.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:j.push({eventName:e,timestamp:Date.now(),attributes:t});case 1:case"end":return n.stop()}},_callee)}));return function sendUsageMetricEvent(t,n){return e.apply(this,arguments)}}(),C=function counterMetric(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={value:1,dimensions:{type:i.b.COUNTER},metric:t?h(e):e};b.push(n)},S=function timingMetric(e,t){b.push(function toCapturedMetric(e){var t=e.name,n=e.type,r=e.value,a=e.buckets,c=void 0===a?[]:a;return{value:r,dimensions:i.b.BUCKET?{type:n,buckets:c.join(", ")}:{type:n},metric:t}}({name:"".concat(h(e),".buckets"),type:i.b.BUCKET,value:t,buckets:i.a})),j.push({eventName:e,attributes:{duration:t},timestamp:Date.now()})},h=function _getMetricPrefix(e){return"widget_core.".concat(e)},T=function getRoughSizeOfObjectInBytes(e){for(var t=[],n=[e],r=0;n.length;){var a=n.pop();switch(typeof a){case"boolean":r+=4;break;case"string":r+=2*a.length;break;case"number":r+=8;break;case"object":if(-1===t.indexOf(a))for(var c in t.push(a),a)n.push(a[c])}}return r}},"6lNa":function(e,t,n){"use strict";var r,a,c;n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return c}),function(e){e.ONLINE="AVAILABLE",e.OFFLINE="OFFLINE"}(r||(r={})),function(e){e.DISMISSED="DISMISSED",e.OPENED="OPENED",e.CLICKED="CLICKED",e.SUBMITTED="SUBMITTED",e.LEAD_CAPTURED="LEAD_CAPTURED"}(a||(a={})),function(e){e.CHAT="CHAT"}(c||(c={}))},"7BJg":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n("uIJS"),a=n("0lfv"),c=function EventBuffer(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;Object(r.a)(this,EventBuffer),this._events=void 0,this._bufferTime=void 0,this._eventBufferTimer=void 0,this._startBuffer=function(){e._eventBufferTimer=window.setTimeout(e._publishBuffer,e._bufferTime)},this._resetBuffer=function(){e._events=[],e._eventBufferTimer=null},this._publishBuffer=function(){Object(a.e)(new Error("You must implement the _publishBuffer method in your extension of eventBuffer"))},this._isEmptyBuffer=function(){return!e._events.length&&!e._eventBufferTimer},this.push=function(t){e._isEmptyBuffer()&&e._startBuffer(),e._events.push(t)},this._resetBuffer(),this._bufferTime=t}},"7oto":function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"c",function(){return f}),n.d(t,"b",function(){return E});var r=n("mj2O"),a=n.n(r),c=n("nfbA"),i=n("7SM1"),o=n("LeJ0"),u=n("Lm5s"),s=n("LVcX"),d=n("0lfv"),l=function(){var e=Object(i.a)(a.a.mark(function _callee(e){var t,n,r,i,o;return a.a.wrap(function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return t=e.topic,n=e.message,r=Object(c.a)({_meta:{id:Object(d.n)()}},n),a.prev=2,a.next=5,Object(u.send)(window.parent,t,r,{timeout:2e4,window:window.parent});case 5:return i=a.sent,a.abrupt("return",i);case 9:return a.prev=9,a.t0=a.catch(2),o=Object(s.a)("",["name"],n),Object(d.k)({data:["Failed to broadcast message ".concat(t," - ").concat(o),n,a.t0]}),a.abrupt("return",Promise.reject("Could not broadcast message with topic: ".concat(t," - ").concat(a.t0)));case 14:case"end":return a.stop()}},_callee,null,[[2,9]])}));return function broadcast(t){return e.apply(this,arguments)}}(),f=function listen(e){var t=e.topic,n=e.handler;try{Object(u.on)(t,{window:window.parent},n)}catch(r){"PRODUCTION"!==o.a.ENV&&console.warn(r)}},E=function(){var e=Object(i.a)(a.a.mark(function _callee2(e,t){return a.a.wrap(function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=e,!n.t0){n.next=4;break}return n.next=4,e();case 4:l({topic:"kill-frame",message:{name:t}});case 5:case"end":return n.stop()}},_callee2)}));return function executeThenKillFrame(t,n){return e.apply(this,arguments)}}()},"8saY":function(e,t,n){"use strict";var r,a,c,i,o;n.d(t,"c",function(){return r}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o}),function(e){e.ENABLED="ENABLED",e.DISABLED="DISABLED",e.REQUIRED="REQUIRED"}(r||(r={})),function(e){e.EVERYONE="EVERYONE",e.VISITORS="VISITORS",e.USERS="USERS",e.SEGMENT="SEGMENT",e.NONE="NONE",e.PREVIOUS="PREVIOUS"}(a||(a={})),function(e){e.AUTO="AUTO",e.MANUAL="MANUAL"}(c||(c={})),function(e){e.ON="ON",e.OFF="OFF",e.AWAY="AWAY"}(i||(i={})),function(e){e.CIRCLE="circle",e.SQUARE="square"}(o||(o={}))},"9ttK":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var r=n("WwEg"),a=n("QtlZ"),c=(n("SFoa"),n("da4L"),n("LVcX")),i=function getAttributeFromCampaignOrDefault(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(c.a)(n,["attributes"].concat(Object(r.a)(t)),e)},o=function getCampaignFromEmbedById(e){return Object(c.a)([],["embed","configuration","campaigns"],a.a.getState()).filter(function(t){return t.id===e})[0]}},"9xv8":function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return l});var r=n("8lq6"),a=n("C7P9"),c=n("NFvl"),i=n("weY7"),o=n("woTc"),u=n("yrQw"),s=n("Bmr4"),d=(n("0lfv"),function orderConversationsBy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"updatedAt";return Object(r.a)([Object(a.a)(Object(c.a)(["conversation","".concat(t)]))])(e)}),l=function messagesByWidgetGuid(e){return Object(o.a)(Object(i.a)(Object(u.a)(Object(s.a)(["attributes","widgetGuid"]),Object(c.a)(["attributes","widgetGuid"]),Object(c.a)(["id"])),e),e)}},BMKr:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n("1FNf"),a=n("jrvE"),c=n("LeJ0"),i=n("QtlZ"),o=n("LVcX"),u=n("Jstd"),s=["timeout of 0ms exceeded","network error","loading chunk","ns.GetCommandSrc","NO ACCESS ON THIS DOMAIN","the operation is insecure","NS_ERROR","Access is denied","Could not broadcast message with topic","No ack for postMessage","No handler found for post message","isTrusted"];"LOCAL"!==c.a.ENV&&Object(a.a)({dsn:c.a.SENTRY_DSN,maxBreadcrumbs:50,attachStacktrace:!0,release:"widget-core@ 1aee2274d2b95237560439dedba32fb350b34833",environment:c.a.ENV,beforeSend:function beforeSend(e,t){if(!t||!t.originalException)return e;var n=Object(o.a)("",["originalException","message"],t);if(function isCustomEventError(e){var t=Object(o.a)(null,["detail","reason"],e);return e instanceof CustomEvent&&t instanceof Error}(n))return function handleCustomEventError(e){Object(r.c)(function(t){var n=e.detail.reason;e.detail.reason="<error object captured above>",t.setExtras({originalThrownObject:e}),d(n)})}(n),null;var a="";return"string"==typeof n?a=n:n instanceof Error&&(a=n.message),a.length&&Object(u.a)(function(e){return-1!==a.toLowerCase().indexOf(e.toLowerCase())},s)?null:e},blacklistUrls:[/extensions\//i,/^chrome:\/\//i]});var d=function captureException(e,t){Object(r.b)(function(e){var n=i.a.getState(),r=n.session,a=void 0===r?{}:r,c=n.embed,u=void 0===c?{}:c,s=Object(o.a)(null,["context","page","url"],a),d=u.orgId;d&&e.setTag("orgId",d),s&&e.setTag("url",s),t&&e.setExtra("error-meta",t),e.setExtra("widget-frame","core"),e.setExtra("redux",{session:i.a.getState().session,view:i.a.getState().view,org:i.a.getState().embed.orgId,identity:i.a.getState().identity})}),Object(r.a)(e)}},CYoe:function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"a",function(){return c}),n.d(t,"b",function(){return i});var r=n("Cpup"),a=function setHasSentImpression(){return Object(r.a)({type:"SET_HAS_SENT_IMPRESSION"})},c=function receiveInitTimestamp(e){return Object(r.a)({type:"RECEIVE_INIT_TIMESTAMP",payload:e})},i=function receiveServerResponseSize(e){return Object(r.a)({type:"RECEIVE_SERVER_RESPONSE_SIZE",payload:e})}},Cpup:function(e,t,n){"use strict";var r=n("nfbA"),a=n("hX/4"),c=n("LeJ0"),i=n("9OUN"),o=n("Nw0q"),u=n("6BAR"),s=function createReducer(e){return function(t,n){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments.length>1?arguments[1]:void 0;return Object(u.a)(r,function(t){if(!a.type)return t;var r=n[function resolveLocalAction(e,t){return t.replace("".concat(e,"_"),"")}(e,a.type)];return r?r({draft:t,action:a}):t})}}};n.d(t,"b",function(){return v}),n.d(t,"a",function(){return O}),n.d(t,"c",function(){return g});var d=c.a.REDUX_ACTION_NAMESPACE,l=function actionType(e,t){return"".concat(e,"_").concat(t)},f=function CreateAction(e){return function(t){var n=t.type,c=Object(a.a)(t,["type"]);return Object(r.a)({type:l(e,n)},c)}},E=function MergeReducers(e){return function(e){return Object(i.c)({reducers:e})}},p=function OfType(e){return function(t){return Object(o.a)("".concat(e,"_").concat(t))}},b=function reduxInit(e){return{createReducer:s(e),createAction:f(e),mergeReducers:E(),ofType:p(e)}}(d),v=b.createReducer,O=b.createAction,g=(b.mergeReducers,b.ofType)},EQxi:function(e,t,n){"use strict";n.d(t,"b",function(){return f}),n.d(t,"a",function(){return E}),n.d(t,"d",function(){return p}),n.d(t,"c",function(){return b});var r=n("VzzF"),a=n.n(r),c=n("JBtm"),i=n("aUJj"),o=n.n(i),u=n("0lfv"),s=n("F8vJ"),d=/<a href=/gi,l=/(\s|^)(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/){1}[a-z0-9]+([-.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/\S*)?/gm,f=function linkifyMessageBody(e){return e.replace(d,'<a target="_blank" rel="noopener noreferrer" href=').replace(l,function(e,t){return"".concat(t,'<a href="').concat(e.trim(),'" target="_blank" rel="noopener noreferrer">').concat(e.trim(),"</a>")})},E=function getUrlsFromText(e){return e.indexOf("<img")>=0&&e.indexOf("src=")>=0?[]:(e.replace("&#64;","@").match(o()({strict:!1}))||[]).filter(function(e){return!Object(s.a)(e,!1)}).map(function(e){return function getParsedUrl(e){try{return Object(c.parseUrl)(e).url}catch(t){Object(u.k)({data:[t],type:"warn"})}}(e)})},p=function parseQueryStringBooleans(e){var t={};return Object.keys(e).forEach(function(n){"true"===e[n].toLowerCase()?t[n]=!0:"false"===e[n].toLowerCase()?t[n]=!1:t[n]=e[n]}),t},b=function normalizeDriftUrl(e){if(!e)return"";try{return a()(e,{normalizeProtocol:!0,stripHash:!1,stripWWW:!0,removeQueryParameters:[],removeTrailingSlash:!0}).replace(/^https?:\/\//,"")}catch(t){return Object(u.k)({data:["Failed to normalizeUrl"]}),e}}},F8vJ:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=/[-!#$%&'*+/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+/,a=new RegExp("^".concat(r.source,"$")),c=function validateEmail(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?a:r;return!!(function emailExists(e){return!!e}(e)&&function emailHasCorrectLength(e){return e.length<254}(e)&&function emailMatchesRegex(e){return t.test(e)}(e)&&function emailHasAllowedParts(e){var t=e.split("@");return!(t[0].length>64)&&!t[1].split(".").some(function(e){return e.length>63})}(e))}},K7i0:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"n",function(){return c}),n.d(t,"m",function(){return i}),n.d(t,"p",function(){return o}),n.d(t,"i",function(){return u}),n.d(t,"k",function(){return s}),n.d(t,"c",function(){return d}),n.d(t,"e",function(){return l}),n.d(t,"q",function(){return f}),n.d(t,"g",function(){return E}),n.d(t,"h",function(){return p}),n.d(t,"j",function(){return b}),n.d(t,"f",function(){return v}),n.d(t,"l",function(){return O}),n.d(t,"o",function(){return g}),n.d(t,"d",function(){return I}),n.d(t,"s",function(){return m}),n.d(t,"r",function(){return _}),n.d(t,"b",function(){return j});var r=n("Cpup"),a=function clearActiveConversation(){return Object(r.a)({type:"CLEAR_ACTIVE_CONVERSATION"})},c=function setActiveConversation(e){return Object(r.a)({type:"SET_ACTIVE_CONVERSATION",payload:e})},i=function sendMessage(e){return Object(r.a)({type:"SEND_MESSAGE",payload:e})},o=function setHasForcedConversation(){return Object(r.a)({type:"SET_HAS_FORCED_CONVERSATION"})},u=function receiveMessageSent(e){return Object(r.a)({type:"RECEIVE_MESSAGE_SENT",payload:e})},s=function receivePreRenderedMessages(e){return Object(r.a)({type:"RECEIVE_PRE_RENDERED_MESSAGES",payload:e})},d=function receiveAgentMessage(e){return Object(r.a)({type:"RECEIVE_AGENT_MESSAGE",payload:e})},l=function receiveAttachments(e){return Object(r.a)({type:"RECEIVE_ATTACHMENTS",payload:e})},f=function setIsTyping(e){return Object(r.a)({type:"RECEIVE_IS_TYPING",payload:e})},E=function receiveConversation(e){return Object(r.a)({type:"RECEIVE_CONVERSATION",payload:e})},p=function receiveInitialActiveConversation(e){return Object(r.a)({type:"RECEIVE_INITIAL_ACTIVE_CONVERSATION",payload:e})},b=function receiveMessagesForConversation(e){return Object(r.a)({type:"RECEIVE_MESSAGES_FOR_CONVERSATION",payload:e})},v=function receiveBulkConversations(e){return Object(r.a)({type:"RECEIVE_BULK_CONVERSATIONS",payload:e})},O=function receiveReadMessages(e){return Object(r.a)({type:"RECEIVE_READ_MESSAGES",payload:e})},g=function setActiveDriftlink(e){return Object(r.a)({type:"SET_ACTIVE_DRIFTLINK",payload:e})},I=function receiveAgentStatus(e){return Object(r.a)({type:"RECEIVE_AGENT_STATUS",payload:e})},m=function setUnreadMessage(e){return Object(r.a)({type:"SET_UNREAD_MESSAGE",payload:e})},_=function setMatchedConversationRoutingRules(e){return Object(r.a)({type:"RECEIVED_MATCHED_CONVO_ROUTING_RULES",payload:e})},j=function permacloseConversation(e){return Object(r.a)({type:"PERMACLOSE_CONVERSATION",payload:e})}},MFhO:function(e,t,n){"use strict";var r,a;n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a}),function(e){e.ONCE="ONCE",e.ONCE_PER_SESSION="ONCE_PER_SESSION",e.ALWAYS="ALWAYS"}(r||(r={})),function(e){e.WELCOME_MESSAGE="WELCOME_MESSAGE",e.SLIDER="SLIDER",e.TAKEOVER="TAKEOVER",e.EMAIL_CAPTURE="EMAIL_CAPTURE"}(a||(a={}))},Nlet:function(e,t,n){"use strict";n.d(t,"a",function(){return E}),n.d(t,"b",function(){return p}),n.d(t,"c",function(){return b});var r=n("mj2O"),a=n.n(r),c=n("7SM1"),i=n("QtlZ"),o=n("A5mO"),u=n("0lfv"),s=n("7oto"),d=n("EQxi"),l=function getPageContext(e){return{hostname:e.location.hostname,referrer:Object(d.c)(e.referrer),search:e.location.search,path:Object(d.c)(e.location.pathname),title:e.title,url:Object(d.c)(e.location.href),href:e.location.href}},f=function getTimezone(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){Object(u.k)({data:["Failed to guess timezone via Intl",e]})}try{return Object(o.a)(null).timezone().name}catch(e){return Object(u.k)({data:["Failed to guess timezone for context - ".concat(e.message)]}),null}},E=function backfillUnsupportedTimezones(){var e=Object(o.a)(null);e.timezones.pst8pdt=e.timezones["america/los_angeles"],e.timezones.mst=e.timezones["america/denver"],e.timezones.cet=e.timezones["europe/paris"]},p=function(){var e=Object(c.a)(a.a.mark(function _callee(){var e,t,n;return a.a.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(s.a)({topic:"get-host-window"});case 2:return e=r.sent,t=e.data,n=void 0===t?{}:t,r.abrupt("return",{page:l(n),userAgent:n.userAgent,locale:n.locale,timezone:f(),currentSessionStartedAt:n.drift_session_started,currentPageViewStartedAt:n.drift_page_view_started,activeSessionStartedAt:n.drift_session_started,innerWidth:n.innerWidth,innerHeight:n.innerHeight});case 6:case"end":return r.stop()}},_callee)}));return function fetchWindowContext(){return e.apply(this,arguments)}}(),b=function getBrowserContext(){var e=i.a.getState().session,t=(void 0===e?{}:e).context||{},n=t.page||{};return{userAgent:t.userAgent,timezone:t.timezone,locale:t.locale,url:n.url}}},PCkZ:function(e,t,n){"use strict";var r=n("nfbA"),a=n("mj2O"),c=n.n(a),i=n("7SM1"),o=n("m6rJ"),u=n("LqZ+"),s=n("QtlZ"),d=n("2PAb"),l=n("z8Kx"),f=n("vYqp"),E=n("hm8b"),p=n("0lfv"),b=n("VYE+"),v=n("F8vJ"),O=n("4c+F"),g=n("Cpup"),I=function receiveIdentityMap(e){return Object(g.a)({type:"RECEIVE_IDENTITY_MAP",payload:e})},m=n("qSAj"),_={isEnabled:function isEnabled(){return!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).eloqua_cookie_id_enabled},identify:function(){var e=Object(i.a)(c.a.mark(function _callee2(){var e,t,n,r,a=arguments;return c.a.wrap(function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:if(e=a.length>0&&void 0!==a[0]?a[0]:{},t=a.length>1?a[1]:void 0,n=e[d.g]){o.next=5;break}return o.abrupt("return",null);case 5:return r=function(){var e=Object(i.a)(c.a.mark(function _callee(){var e,r,a;return c.a.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(m.a)({cookie:n,orgId:s.a.getState().embed.orgId,anonId:t});case 2:if(e=c.sent,r=e.data,(a=void 0===r?{}:r).email){c.next=7;break}return c.abrupt("return",null);case 7:return c.abrupt("return",{eloquaCookie:n,email:a.email});case 8:case"end":return c.stop()}},_callee)}));return function _identifyEloquaUser(){return e.apply(this,arguments)}}(),o.prev=6,o.next=9,r();case 9:return o.abrupt("return",o.sent);case 12:return o.prev=12,o.t0=o.catch(6),Object(p.e)(new Error("Failed to identify eloqua user"),o.t0),o.abrupt("return",null);case 16:case"end":return o.stop()}},_callee2,null,[[6,12]])}));return function identify(){return e.apply(this,arguments)}}()},j=n("LVcX"),A={isEnabled:function isEnabled(){return!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).hubspot_js},identify:function(){var e=Object(i.a)(c.a.mark(function _callee3(e){return c.a.wrap(function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:if(window._hsq){t.next=3;break}return t.abrupt("return",null);case 3:window._hsq.push(function(){var t=Object(i.a)(c.a.mark(function _callee2(t){var n,r;return c.a.wrap(function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=2;break}return a.abrupt("return",null);case 2:if(n=Object(j.a)(null,["visitor","utk"],t)){a.next=5;break}return a.abrupt("return",null);case 5:return r=function(){var t=Object(i.a)(c.a.mark(function _callee(){var t,r,a;return c.a.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(m.b)({utk:n,orgId:s.a.getState().embed.orgId,anonId:e});case 2:if(t=c.sent,r=t.data,(a=void 0===r?{}:r).email){c.next=7;break}return c.abrupt("return",null);case 7:return c.abrupt("return",{email:a.email});case 8:case"end":return c.stop()}},_callee)}));return function _identifyHubspotUser(){return t.apply(this,arguments)}}(),a.prev=6,a.next=9,r();case 9:return a.abrupt("return",a.sent);case 12:a.prev=12,a.t0=a.catch(6),Object(p.e)(new Error("Failed to identify hubspot user"),a.t0);case 15:case"end":return a.stop()}},_callee2,null,[[6,12]])}));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}},_callee3)}));return function identify(t){return e.apply(this,arguments)}}()},C={isEnabled:function isEnabled(){return!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).marketo},identify:function(){var e=Object(i.a)(c.a.mark(function _callee2(){var e,t,n,r,a=arguments;return c.a.wrap(function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:if(e=a.length>0&&void 0!==a[0]?a[0]:{},t=a.length>1?a[1]:void 0,n=e[d.h]){o.next=5;break}return o.abrupt("return",null);case 5:return r=function(){var e=Object(i.a)(c.a.mark(function _callee(){var e,r,a;return c.a.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(m.c)({munchkin:n,orgId:s.a.getState().embed.orgId,anonId:t});case 2:return e=c.sent,r=e.data,a=void 0===r?{}:r,c.abrupt("return",{email:a.email,munchkinCookie:n});case 6:case"end":return c.stop()}},_callee)}));return function _identifyMarketoUser(){return e.apply(this,arguments)}}(),o.prev=6,o.next=9,r();case 9:return o.abrupt("return",o.sent);case 12:o.prev=12,o.t0=o.catch(6),Object(p.e)(new Error("Failed to identify marketo user"),o.t0);case 15:case"end":return o.stop()}},_callee2,null,[[6,12]])}));return function identify(){return e.apply(this,arguments)}}()},S=n("JBtm"),h=n.n(S),T=n("7oto"),y={identify:function(){var e=Object(i.a)(c.a.mark(function _callee(){var e,t,n,r;return c.a.wrap(function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(T.a)({topic:"access-host-window",message:{key:"location"}});case 2:if(e=a.sent,t=e.data,(n=void 0===t?{}:t)&&n.search){a.next=7;break}return a.abrupt("return",null);case 7:if((r=h.a.parse(n.search)).d_utk){a.next=10;break}return a.abrupt("return",null);case 10:return a.abrupt("return",r.d_utk);case 11:case"end":return a.stop()}},_callee)}));return function identify(){return e.apply(this,arguments)}}()},N={isEnabled:function isEnabled(){return!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).pardot_cookie_id_enabled},identify:function(){var e=Object(i.a)(c.a.mark(function _callee2(){var e,t,n,r,a=arguments;return c.a.wrap(function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:if(e=a.length>0&&void 0!==a[0]?a[0]:{},t=a.length>1?a[1]:void 0,n=e[d.i]){o.next=5;break}return o.abrupt("return",null);case 5:return r=function(){var e=Object(i.a)(c.a.mark(function _callee(){var e,r,a;return c.a.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(m.d)({cookie:n,orgId:s.a.getState().embed.orgId,anonId:t});case 2:return e=c.sent,r=e.data,a=void 0===r?{}:r,c.abrupt("return",{email:a.email,pardotCookie:n});case 6:case"end":return c.stop()}},_callee)}));return function _identifyPardotUser(){return e.apply(this,arguments)}}(),o.prev=6,o.next=9,r();case 9:return o.abrupt("return",o.sent);case 12:o.prev=12,o.t0=o.catch(6),Object(p.e)(new Error("Failed to identify pardot user"),o.t0);case 15:case"end":return o.stop()}},_callee2,null,[[6,12]])}));return function identify(){return e.apply(this,arguments)}}()};n.d(t,"c",function(){return R}),n.d(t,"b",function(){return x}),n.d(t,"a",function(){return w}),n.d(t,"d",function(){return M});var R=function getIntegrationIdentityContext(){var e=s.a.getState().identity,t=e.marketo_cookie,n=e.pardot_cookie,r=e.eloqua_cookie,a={};return t&&(a.marketo={munchkinValue:t}),n&&(a.pardot={visitorId:n}),r&&(a.eloqua={cookie:r}),a},x=function(){var e=Object(i.a)(c.a.mark(function _callee(){var e,t,n,r,a,i;return c.a.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:return e=Object(l.b)(),c.next=3,Object(l.e)();case 3:if(t=c.sent,n=t.externalId,r=t.userJwt,!(!!n||!!r)){c.next=13;break}return c.next=10,U({id:n,email:e,userJwt:r});case 10:c.t0=c.sent,c.next=16;break;case 13:return c.next=15,D(e);case 15:c.t0=c.sent;case 16:return a=c.t0,i=Object(f.a)(E.a,a),s.a.dispatch(I(i)),c.abrupt("return",i);case 20:case"end":return c.stop()}},_callee)}));return function generateIdentity(){return e.apply(this,arguments)}}(),w=function(){var e=Object(i.a)(c.a.mark(function _callee2(e){var t,n;return c.a.wrap(function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:return t=e.orgId,r.next=3,x();case 3:return n=r.sent,r.next=6,k(t,n);case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}},_callee2)}));return function auth(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(i.a)(c.a.mark(function _callee3(e,t,n){var a,i,o;return c.a.wrap(function _callee3$(c){for(;;)switch(c.prev=c.next){case 0:if(c.prev=0,!t||H(t)){c.next=4;break}return Object(p.k)({data:["Unable to identify due to undefined userId"]}),c.abrupt("return");case 4:if(a=Object(r.a)({},n),!t||a.userJwt){c.next=11;break}return c.next=8,Object(l.e)();case 8:i=c.sent,(o=i.userJwt)&&(a.userJwt=o);case 11:return c.next=13,Object(u.b)(e,t,a);case 13:c.next=18;break;case 15:c.prev=15,c.t0=c.catch(0),Object(p.k)({data:[c.t0],type:"warn"});case 18:case"end":return c.stop()}},_callee3,null,[[0,15]])}));return function updateIdentity(t,n,r){return e.apply(this,arguments)}}(),k=function(){var e=Object(i.a)(c.a.mark(function _callee4(e,t){var n,r,a;return c.a.wrap(function _callee4$(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(o.a)(e,t);case 2:return n=c.sent,r=n.data,a=n.responseTime,Object(O.d)("enduser_auth",a),c.abrupt("return",r);case 7:case"end":return c.stop()}},_callee4)}));return function authenticateWithIdentity(t,n){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(c.a.mark(function _callee5(e){var t;return c.a.wrap(function _callee5$(n){for(;;)switch(n.prev=n.next){case 0:return t={},n.next=3,L();case 3:return t.lead_id=n.sent,n.t0=Object,n.t1=t,n.next=8,P(t,e);case 8:return n.t2=n.sent,t=n.t0.assign.call(n.t0,n.t1,n.t2),n.t3=Object,n.t4=t,n.next=14,V(t);case 14:return n.t5=n.sent,t=n.t3.assign.call(n.t3,n.t4,n.t5),n.abrupt("return",t);case 17:case"end":return n.stop()}},_callee5)}));return function resolveIdentityProviders(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(i.a)(c.a.mark(function _callee6(e,t){var n;return c.a.wrap(function _callee6$(r){for(;;)switch(r.prev=r.next){case 0:return Object(v.a)(t)&&(e.email=t),r.next=3,y.identify();case 3:(n=r.sent)&&(e.oneshot_token=n);case 5:case"end":return r.stop()}},_callee6)}));return function resolveDirectIdentityProviders(t,n){return e.apply(this,arguments)}}(),V=function(){var e=Object(i.a)(c.a.mark(function _callee7(e){var t,n,r,a,i,o,u,d,l;return c.a.wrap(function _callee7$(c){for(;;)switch(c.prev=c.next){case 0:return t=s.a.getState(),n=t.embed.configuration.gates,r=void 0===n?[]:n,c.next=4,Object(b.c)();case 4:if(a=c.sent,i=e.lead_id,!A.isEnabled(r)){c.next=11;break}return c.next=9,A.identify(i);case 9:(o=c.sent)&&(e.email=o.email);case 11:if(!C.isEnabled(r)){c.next=16;break}return c.next=14,C.identify(a,i);case 14:(u=c.sent)&&(e.marketo_cookie=u.munchkinCookie,u.email&&(e.email=u.email));case 16:if(!N.isEnabled(r)){c.next=21;break}return c.next=19,N.identify(a,i);case 19:(d=c.sent)&&(e.pardot_cookie=d.pardotCookie,d.email&&(e.email=d.email));case 21:if(!_.isEnabled(r)){c.next=26;break}return c.next=24,_.identify(a,i);case 24:(l=c.sent)&&(e.eloqua_cookie=l.eloquaCookie,l.email&&(e.email=l.email));case 26:return c.abrupt("return",e);case 27:case"end":return c.stop()}},_callee7)}));return function resolveThirdPartyIdentityProviders(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(i.a)(c.a.mark(function _callee8(){var e,t,n;return c.a.wrap(function _callee8$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(b.e)(d.b);case 2:return e=r.sent,r.next=5,Object(b.e)(d.c);case 5:if(t=r.sent,e){r.next=14;break}if(!t){r.next=10;break}return Object(b.g)(d.b,t),r.abrupt("return",t);case 10:return n=Object(p.n)(),Object(b.g)(d.b,n),Object(b.g)(d.c,n),r.abrupt("return",n);case 14:return r.abrupt("return",e);case 15:case"end":return r.stop()}},_callee8)}));return function generateAnonymousIdentity(){return e.apply(this,arguments)}}(),U=function(){var e=Object(i.a)(c.a.mark(function _callee9(e){var t,n,r,a,i,o;return c.a.wrap(function _callee9$(c){for(;;)switch(c.prev=c.next){case 0:if(t=e.id,n=e.email,r=e.userJwt,a={user_id:t,email:n,jwt:r},i=Object(l.c)()&&!r,o=!H(t),!i&&!o){c.next=9;break}return delete a.user_id,c.next=8,L();case 8:a.lead_id=c.sent;case 9:return c.abrupt("return",a);case 10:case"end":return c.stop()}},_callee9)}));return function generateExternalIdMap(t){return e.apply(this,arguments)}}(),H=function isValidExternalId(e){return!!e&&(!("undefined"===e)&&!("undefined-undefined"===e)&&!("d41d8cd98f00b204e9800998ecf8427e"===e))}},PjZB:function(e,t,n){"use strict";var r,a,c,i,o,u,s;n.d(t,"a",function(){return r}),n.d(t,"c",function(){return c}),n.d(t,"e",function(){return i}),n.d(t,"f",function(){return o}),n.d(t,"b",function(){return u}),n.d(t,"d",function(){return s}),function(e){e.CHAT_RESPONSE="CHAT_RESPONSE",e.LINK_TO_URL="LINK_TO_URL",e.SCHEDULE_MEETING="SCHEDULE_MEETING"}(r||(r={})),function(e){e.CREATE_CONVERSATION="CREATE_CONVERSATION",e.UPDATE_CONVERSATION="UPDATE_CONVERSATION"}(a||(a={})),function(e){e.CHAT="CHAT",e.PRIVATE_NOTE="PRIVATE_NOTE",e.CONVERSATION_EVENT="CONVERSATION_EVENT",e.NPS_QUESTION="NPS_QUESTION",e.NPS_RESPONSE="NPS_RESPONSE",e.ANNOUNCEMENT="ANNOUNCEMENT",e.EMAIL_CAPTURE="EMAIL_CAPTURE",e.SUGGESTION="SUGGESTION",e.EDIT="EDIT",e.PRIVATE_PROMPT="PRIVATE_PROMPT",e.CHAT_RATING="CHAT_RATING",e.EMAIL_CAPTURE_CARD="EMAIL_CAPTURE_CARD",e.BOT_CONVERSATION_RATING="BOT_CONVERSATION_RATING",e.BOT_NODE_CONDITION_EVALUATION="BOT_NODE_CONDITION_EVALUATION",e.ROUTING_FEEDBACK_RATING="ROUTING_FEEDBACK_RATING"}(c||(c={})),function(e){e.EMAIL="EMAIL",e.SMS="SMS",e.CHAT="CHAT",e.PHONE="PHONE",e.TWITTER="TWITTER",e.PRIVATE_NOTE="PRIVATE_NOTE",e.CONVERSATION_EVENT="CONVERSATION_EVENT",e.NPS_QUESTION="NPS_QUESTION",e.NPS_RESPONSE="NPS_RESPONSE",e.ANNOUNCEMENT="ANNOUNCEMENT",e.EMAIL_CAPTURE="EMAIL_CAPTURE",e.SUGGESTION="SUGGESTION",e.EDIT="EDIT",e.PRIVATE_PROMPT="PRIVATE_PROMPT",e.CHAT_RATING="CHAT_RATING",e.EMAIL_CAPTURE_CARD="EMAIL_CAPTURE_CARD",e.BOT_CONVERSATION_RATING="BOT_CONVERSATION_RATING",e.BOT_NODE_CONDITION_EVALUATION="BOT_NODE_CONDITION_EVALUATION"}(i||(i={})),function(e){e.SENT="Sent",e.DELIVERED="Delivered",e.READ="Read"}(o||(o={})),function(e){e.USER="USER",e.END_USER="END_USER",e.NONE="NONE",e.LEAD="LEAD"}(u||(u={})),function(e){e.AGENT="AGENT",e.END_USER="END_USER"}(s||(s={}))},SFoa:function(e,t,n){"use strict";n.d(t,"d",function(){return s}),n.d(t,"a",function(){return d}),n.d(t,"b",function(){return l}),n.d(t,"f",function(){return f}),n.d(t,"e",function(){return E}),n.d(t,"c",function(){return p});var r=n("QtlZ"),a=n("da4L"),c=n("LVcX"),i=n("BCC6"),o=n("YsSj"),u=n("vTYT"),s=function getEmbedThemeProperty(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(c.a)(n,["configuration","theme",t],e)},d=function getCampaignIdFromInteractionId(e){var t=Object(c.a)(null,["embed","configuration","campaigns"],r.a.getState());if(t){var n=Object(i.a)(Object(o.a)(function hasInteractionId(t){return Object(a.a)(t,"interactionId")===e},t));if(n)return n.id}return null},l=function getCampaignPropertyById(e,t){var n=Object(c.a)(null,["embed","configuration","campaigns"],r.a.getState());if(!n)return null;var a=n.filter(function(t){return t.id===e})[0];return a?Object(c.a)(null,[t],a):null},f=function getWidgetAlignment(){return Object(c.a)(u.a.RIGHT,["embed","configuration","theme","alignment"],r.a.getState())},E=function getOrgId(){return Object(c.a)(0,["embed","orgId"],r.a.getState())},p=function getEmbedLocale(){return Object(c.a)("en",["embed","configuration","locale"],r.a.getState())}},SsZN:function(e,t,n){"use strict";n.d(t,"b",function(){return b}),n.d(t,"e",function(){return v}),n.d(t,"h",function(){return O}),n.d(t,"j",function(){return g}),n.d(t,"k",function(){return I}),n.d(t,"m",function(){return m}),n.d(t,"l",function(){return _}),n.d(t,"n",function(){return j}),n.d(t,"o",function(){return A}),n.d(t,"f",function(){return C}),n.d(t,"p",function(){return S}),n.d(t,"r",function(){return h}),n.d(t,"c",function(){return T}),n.d(t,"q",function(){return y}),n.d(t,"g",function(){return N}),n.d(t,"t",function(){return R}),n.d(t,"a",function(){return x}),n.d(t,"d",function(){return w}),n.d(t,"s",function(){return M}),n.d(t,"i",function(){return k});var r=n("mj2O"),a=n.n(r),c=n("7SM1"),i=n("nfbA"),o=n("QtlZ"),u=n("LVcX"),s=n("SWQ0"),d=n("6lNa"),l=n("0lfv"),f=n("wNJw"),E=function hydrateWithActiveCampaignData(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o.a.getState().campaigns,n=void 0===t?{}:t;if(e&&e.conversationId){var r=Object(u.a)(null,["activeCampaign","message","conversationId"],n);if(e.conversationId!==r)return e}var a=Object(u.a)(null,["activeCampaign","attributes","campaignId"],n),c=Object(u.a)(null,["activeCampaign","attributes","startInteraction"],n),s=Object(u.a)(null,["activeCampaign","attributes","playbookId"],n);return Object(i.a)(Object(i.a)({},e),{},{campaignId:a,interactionId:c,playbookId:s})},p=function createMessageEventPayload(e){return E({inboxId:e.inboxId,conversationId:e.conversationId})},b=function triggerButtonClickedAPIEvent(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(u.a)(null,["attributes","questionId"],e),n=E({createdAt:e.createdAt,authorId:e.authorId,conversationId:e.conversationId,buttonBody:e.body,questionId:t});Object(f.a)(s.b.CONVERSATION_BUTTON_CLICKED,n)},v=function triggerConversationFirstInteractionAPIEvent(e){var t=E({createdAt:e.createdAt,authorId:e.authorId});Object(f.a)(s.b.CONVERSATION_INTERACTED,t)},O=function triggerEmailCapturedAPIEvent(e){var t=e.email,n=o.a.getState().conversations,r=(void 0===n?{}:n).activeConversation||null,a={data:E({email:t,conversationId:r})};Object(f.a)(s.b.EMAIL_CAPTURED,a)},g=function triggerMeetingRequestedAPIEvent(e){var t=Object(u.a)([],["embed","configuration","team"],o.a.getState()).filter(function(t){return t.id===e});if(t.length){var n=t[0],r={teamMember:{id:n.id,name:n.name}};Object(f.a)(s.b.MEETING_REQUESTED,r)}},I=function triggerMeetingScheduledAPIEvent(e){var t=e.agentId,n=e.meetingTime,r=e.duration,a=e.timeZone,c=e.conversationId,i=Object(u.a)({},["conversations","messages",c],o.a.getState()),d=i[Object.keys(i)[0]],l=Object(u.a)([],["embed","configuration","team"],o.a.getState()).filter(function(e){return e.id===t})[0];if(d){var E=Object(u.a)(null,["attributes","campaignId"],d),p=Object(u.a)(null,["attributes","playbookId"],d),b=Object(u.a)(null,["attributes","startInteraction"],d),v={teamMember:{id:l.id,name:l.name},meeting:{time:n,duration:r,timeZone:a},conversationId:c,playbookId:p,campaignId:E,interactionId:b};Object(f.a)(s.b.MEETING_BOOKED,v)}},m=function triggerMessageSentAPIEvent(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(f.a)(s.b.MESSAGE_SENT,p(e))},_=function triggerMessageReceivedAPIEvent(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function getTeamUser(e){return e?Object(u.a)([],["embed","configuration","team"],o.a.getState()).find(function(t){return t.id===e}):null}(e.authorId)||{},n=Object(i.a)(Object(i.a)({},p(e)),{},{teamMember:{id:t.id,name:t.name}});Object(f.a)(s.b.MESSAGE_RECEIVED,n)},j=function triggerPhoneCapturedAPIEvent(e,t){var n=E({createdAt:e.createdAt,authorId:e.authorId,conversationId:e.conversationId,phone:t});Object(f.a)(s.b.PHONE_NUMBER_CAPTURED,n)},A=function triggerPlaybookClickedAPIEvent(e){var t=(e||{}).conversationId,n=E({conversationId:t});Object(f.a)(s.b.CONVERSATION_PLAYBOOK_CLICKED,n)},C=function triggerConversationSelectedAPIEvent(e){var t=E({conversationId:e});Object(f.a)(s.b.CONVERSATION_SELECTED,t)},S=function triggerPlaybookDismissedAPIEvent(e){var t=e||{},n=t.conversationId,r=t.id,a=E({conversationId:n,messageId:r});Object(f.a)(s.b.CONVERSATION_PLAYBOOK_DISMISSED,a)},h=function(){var e=Object(c.a)(a.a.mark(function _callee(e){var t;return a.a.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:t=Object(i.a)({botMessage:Object(l.g)(e)},E()),Object(f.a)(s.b.SLIDER_CLOSED,t);case 2:case"end":return n.stop()}},_callee)}));return function triggerSliderClosedAPIEvent(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(c.a)(a.a.mark(function _callee2(e,t){var n,r,c;return a.a.wrap(function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:if(e&&t){a.next=2;break}return a.abrupt("return");case 2:n=Object(u.a)(!1,["view","matchedTargeting"],o.a.getState()),r=Object(u.a)(!1,["targeting","isOnline"],o.a.getState()),c={campaignId:t,data:{isOnline:r,sidebarOpen:!1,widgetVisible:n}},a.t0=e,a.next=a.t0===d.b.CLICKED?8:a.t0===d.b.SUBMITTED?10:a.t0===d.b.OPENED?12:a.t0===d.b.DISMISSED?14:16;break;case 8:return Object(f.a)(s.b.CAMPAIGN_CLICKED,c),a.abrupt("break",17);case 10:return Object(f.a)(s.b.CAMPAIGN_SUBMITTED,c),a.abrupt("break",17);case 12:return Object(f.a)(s.b.CAMPAIGN_OPENED,c),a.abrupt("break",17);case 14:return Object(f.a)(s.b.CAMPAIGN_DISMISSED,c),a.abrupt("break",17);case 16:return a.abrupt("break",17);case 17:case"end":return a.stop()}},_callee2)}));return function triggerCampaignActionAPIEvent(t,n){return e.apply(this,arguments)}}(),y=function triggerPlaybookFiredAPIEvent(e){var t=e||{},n=t.authorId,r=t.conversationId,a=t.createdAt,c=t.id,i=t.attributes,o=(i=void 0===i?{playbookId:null,startInteraction:null,interactionId:null,campaignId:null}:i).playbookId,u=i.startInteraction,d=i.interactionId,l=i.campaignId;Object(f.a)(s.b.CONVERSATION_PLAYBOOK_FIRED,{messageId:c,createdAt:a,authorId:n,conversationId:r,interactionId:d||u,playbookId:o,campaignId:l})},N=function triggerConversationStartedAPIEvent(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={inboxId:e.inboxId,conversationId:e.conversationId};Object(f.a)(s.b.CONVERSATION_STARTED,t)},R=function triggerWelcomeMessageAPIEvent(e){var t=e?s.b.WELCOME_MESSAGE_OPENED:s.b.WELCOME_MESSAGE_CLOSED;Object(f.a)(t)},x=function triggerAwayMessageAPIEvent(e){var t=e?s.b.AWAY_MESSAGE_OPENED:s.b.AWAY_MESSAGE_CLOSED;Object(f.a)(t)},w=function createTriggerChatVisibleAPIEvent(){var e=!1;return function(t){e!==(t=!!t)&&((t?[s.b.CHAT_OPENED,s.b.SIDEBAR_OPENED]:[s.b.CHAT_CLOSED,s.b.SIDEBAR_CLOSED]).forEach(function(e){return Object(f.a)(e)}),e=t)}}(),M=function triggerUserAttributesUpdatedEvent(){Object(f.a)(s.b.USER_ATTRIBUTES_UPDATED)},k=function triggerFormDataCollectedEvent(e){Object(f.a)(s.b.FORM_DATA_COLLECTED,e)}},TDUE:function(e,t,n){"use strict";var r=n("jm9a"),a=n("nfbA"),c=n("mj2O"),i=n.n(c),o=n("7SM1"),u=n("SHZQ"),s=n("hm8b"),d=n("mfas"),l=n("MFhO"),f=n("gG69"),E=n("t8ds"),p=n("QtlZ"),b=n("9ttK"),v=n("CYoe"),O=n("LVcX"),g=n("0lfv"),I=function getTimeToImpression(e){if(e&&!function hasSentImpression(){var e=p.a.getState().impressions;return(void 0===e?{}:e).hasSentImpression||!1}())return p.a.dispatch(Object(v.c)()),Date.now()-e},m=function(){var e=Object(o.a)(i.a.mark(function _callee(e){var t,n,r,a,c,o,u,d,l,f,E,v,m,A,C,S,h,T,y,N,R,x,w,M,k,D,P,V,L,U,H;return i.a.wrap(function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(t=e.source,n=e.meta,r=void 0===n?{}:n,a=p.a.getState(),c=a.embed,o=void 0===c?{}:c,u=a.session,d=void 0===u?{}:u,l=a.conversations,f=void 0===l?{}:l,E=a.campaigns,v=void 0===E?{}:E,m=a.metrics,A=void 0===m?{}:m,i.prev=2,C=o.orgId,S=Object(O.a)(null,["endUser","id"],d),h=Object(O.a)(null,["activeCampaign","id"],v),T=r.conversationId||f.activeConversation,y=d.id,N=d.instanceId,R=Date.now(),x=Object(O.a)("",["context","page","url"],d),w=Object(O.a)("",["context","userAgent"],d),M=Object(s.a)(r.playbookId)?void 0:r.playbookId,k=Object(s.a)(r.interactionId)?void 0:r.interactionId,D=r.virtual||!1,P=r.isDelayed||!1,!_(t)){i.next=22;break}return L=Object(b.b)(h),U=Object(b.a)(L,["campaignReenrollmentType"],null),i.next=21,j(M,S,y,N,T,U,D);case 21:V=i.sent;case 22:return H=I(A.initTimestamp),i.abrupt("return",{orgId:C,endUserId:S,sessionId:y,sentAt:R,impressionSource:{source:t,playbookId:M,interactionId:k,instanceId:N,virtual:D,widgetVersion:2,sendId:V,timeToImpression:H,delayed:P},context:{url:x,userAgent:w}});case 26:return i.prev=26,i.t0=i.catch(2),Object(g.e)(new Error("Failed to create impression event: ".concat(i.t0.message))),i.abrupt("return",null);case 30:case"end":return i.stop()}},_callee,null,[[2,26]])}));return function createImpressionEvent(t){return e.apply(this,arguments)}}();n.d(t,"b",function(){return _}),n.d(t,"a",function(){return j}),n.d(t,"d",function(){return A}),n.d(t,"c",function(){return S});var _=function isPlaybookImpressionEvent(e){return e===f.c.ACTIVE_PLAYBOOK||e===f.c.PASSIVE_PLAYBOOK},j=function(){var e=Object(o.a)(i.a.mark(function _callee(e,t,n,r,a,c,o){var u,s;return i.a.wrap(function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(o){i.next=2;break}return i.abrupt("return",a?"CONVERSATION:".concat(a):void 0);case 2:if(t&&e&&n){i.next=4;break}return i.abrupt("return",u);case 4:i.t0=c,i.next=i.t0===l.b.ONCE?7:i.t0===l.b.ONCE_PER_SESSION?9:i.t0===l.b.ALWAYS?11:19;break;case 7:return u="ONCE:".concat(t,":").concat(e),i.abrupt("break",19);case 9:return u="ONCE_PER_SESSION:".concat(t,":").concat(e,":").concat(n),i.abrupt("break",19);case 11:return i.next=13,h(e);case 13:if(!(s=i.sent)){i.next=16;break}return i.abrupt("return",s);case 16:return u="ALWAYS:".concat(t,":").concat(e,":").concat(r),C(e,u),i.abrupt("break",19);case 19:return i.abrupt("return",u);case 20:case"end":return i.stop()}},_callee)}));return function getImpressionSendId(t,n,r,a,c,i,o){return e.apply(this,arguments)}}(),A=function(){var e=Object(o.a)(i.a.mark(function _callee2(e){var t,n,r=arguments;return i.a.wrap(function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return t=r.length>1&&void 0!==r[1]?r[1]:{},a.next=3,m({source:e,meta:t});case 3:if(!(n=a.sent)){a.next=7;break}return Object(u.f)(n),a.abrupt("return",!0);case 7:return a.abrupt("return",!1);case 8:case"end":return a.stop()}},_callee2)}));return function trackWidgetImpression(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(o.a)(i.a.mark(function _callee3(e,t){var n,c,o;return i.a.wrap(function _callee3$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,E.b.get("ALWAYS_SEND_IDS");case 2:return n=i.sent,c=n.data,o=void 0===c?{}:c,i.next=7,E.b.set("ALWAYS_SEND_IDS",Object(a.a)(Object(a.a)({},o),{},Object(r.a)({},e,t)));case 7:case"end":return i.stop()}},_callee3)}));return function addSendIdToStore(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(o.a)(i.a.mark(function _callee4(e){var t,n,r;return i.a.wrap(function _callee4$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.b.get("ALWAYS_SEND_IDS");case 2:return t=a.sent,n=t.data,r=Object(s.a)(n)?{}:Object(d.a)(["".concat(e)],n),a.next=7,E.b.set("ALWAYS_SEND_IDS",r);case 7:case"end":return a.stop()}},_callee4)}));return function removeSendIdFromStore(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(o.a)(i.a.mark(function _callee5(e){var t,n;return i.a.wrap(function _callee5$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,E.b.get("ALWAYS_SEND_IDS");case 2:return t=r.sent,n=t.data,r.abrupt("return",Object(s.a)(n)?null:n[e]);case 5:case"end":return r.stop()}},_callee5)}));return function getSendIdInStore(t){return e.apply(this,arguments)}}()},"VYE+":function(e,t,n){"use strict";n.d(t,"d",function(){return f}),n.d(t,"c",function(){return E}),n.d(t,"e",function(){return p}),n.d(t,"a",function(){return b}),n.d(t,"b",function(){return v}),n.d(t,"g",function(){return O}),n.d(t,"f",function(){return g});var r=n("mj2O"),a=n.n(r),c=n("7SM1"),i=n("QtlZ"),o=n("JBtm"),u=n.n(o),s=n("LVcX"),d=n("hm8b"),l=n("7oto"),f=function getCookieDomain(){return Object(s.a)(null,["session","cookieDomain"],i.a.getState())},E=function(){var e=Object(c.a)(a.a.mark(function _callee(){var e,t,n;return a.a.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(l.a)({topic:"get-host-cookies"});case 2:return e=r.sent,t=e.data,n=void 0===t?{}:t,r.abrupt("return",n);case 6:case"end":return r.stop()}},_callee)}));return function getAllCookies(){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(a.a.mark(function _callee2(e){var t,n,r;return a.a.wrap(function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(l.a)({topic:"get-cookie-value",message:{name:e}});case 2:return t=a.sent,n=t.data,r=void 0===n?null:n,a.abrupt("return",r);case 6:case"end":return a.stop()}},_callee2)}));return function getCookieValue(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(c.a)(a.a.mark(function _callee3(e){var t,n=arguments;return a.a.wrap(function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:return(t=n.length>1&&void 0!==n[1]?n[1]:{})&&Object(d.a)(t.domain)&&(t.domain=f()),r.next=4,Object(l.a)({topic:"clear-cookie",message:{name:e,options:t}});case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}},_callee3)}));return function clearCookie(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(c.a)(a.a.mark(function _callee4(e){var t,n=arguments;return a.a.wrap(function _callee4$(r){for(;;)switch(r.prev=r.next){case 0:return(t=n.length>1&&void 0!==n[1]?n[1]:{})&&Object(d.a)(t.domain)&&(t.domain=f()),r.next=4,Object(l.a)({topic:"clear-cookies",message:{names:e,options:t}});case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}},_callee4)}));return function clearCookies(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(c.a)(a.a.mark(function _callee5(e,t){var n,r;return a.a.wrap(function _callee5$(a){for(;;)switch(a.prev=a.next){case 0:return n=f(),r=n?{domain:n}:{},a.next=4,Object(l.a)({topic:"set-cookie",message:{name:e,value:t,options:r}});case 4:case"end":return a.stop()}},_callee5)}));return function setCookie(t,n){return e.apply(this,arguments)}}(),g=function resolveCookieDomain(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e?e.find(function(e){return function matchesCookieDomain(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=u.a.parseUrl(document.referrer).url;return(void 0===t?"":t).includes(e)}(e)}):null;return t?".".concat(t):null}},Wjfv:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return c}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return o}),n.d(t,"e",function(){return u});var r=n("Cpup"),a=function receiveActiveCampaign(e){return Object(r.a)({type:"RECEIVE_ACTIVE_CAMPAIGN",payload:e})},c=function clearActiveCampaign(){return Object(r.a)({type:"CLEAR_ACTIVE_CAMPAIGN"})},i=function receiveCampaignEvalId(e){return Object(r.a)({type:"RECEIVE_CAMPAIGN_EVAL_ID",payload:e})},o=function receiveIneligibleCampaigns(e){return Object(r.a)({type:"RECEIVE_INELIGIBLE_CAMPAIGNS",payload:e})},u=function receiveUnreadCampaigns(e){return Object(r.a)({type:"RECEIVE_UNREAD_CAMPAIGNS",payload:e})}},"X9/c":function(e,t,n){"use strict";n.d(t,"d",function(){return c}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"e",function(){return u}),n.d(t,"b",function(){return s});var r=n("7oh4"),a=n("7oto"),c=function setControllerWidth(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Object(a.a)({topic:"set-frame-width",message:{width:"".concat(e,"px"),name:"controller"}})},i=function setControllerHeight(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Object(a.a)({topic:"set-frame-height",message:{height:"".concat(e,"px"),name:"controller",max:!1}})},o=function hideWidgetController(){return i(0)},u=function showWidgetController(){return i(r.a)},s=function resetControllerSize(){i(r.a),c(r.b)}},YA8z:function(e,t,n){"use strict";var r=n("X9/c"),a=n("U3QC"),c=n("icD7"),i=n("Cpup"),o={id:null,attributes:{},message:null},u={activeCampaign:o,campaignEvalId:null,ineligibleCampaignIds:[],unreadCampaigns:[]},s={RECEIVE_ACTIVE_CAMPAIGN:function receiveActiveCampaignHandler(e){var t=e.action;e.draft.activeCampaign=t.payload.data},CLEAR_ACTIVE_CAMPAIGN:function clearActiveCampaignHandler(e){e.draft.activeCampaign=o},RECEIVE_CAMPAIGN_EVAL_ID:function receiveCampaignEvalIdHandler(e){var t=e.action;e.draft.campaignEvalId=t.payload.campaignEvalId},RECEIVE_UNREAD_CAMPAIGNS:function receiveUnreadCampaignsHandler(e){var t=e.action;e.draft.unreadCampaigns=t.payload},RECEIVE_INELIGIBLE_CAMPAIGNS:function receiveIneligibleCampaignsHandler(e){var t=e.action;e.draft.ineligibleCampaignIds=t.payload}},d=Object(i.b)(u,s),l=n("mj2O"),f=n.n(l),E=n("nfbA"),p=n("7SM1"),b=n("OE2q"),v=n("QtlZ"),O=n("SsZN"),g=n("SFoa"),I=n("PCkZ"),m=n("mssF"),_=n("+/Je"),j=n("bYXQ"),A=n("LVcX"),C=n("DboL"),S=function sendMessage(e){var t=v.a.getState().conversations,n=void 0===t?{}:t,r=Object(A.a)(_.a,["activeConversation"],n);return Object(j.c)(r)?h(e):Object(j.b)(e.conversationId)?y(e):T(e)},h=function sendMessageForPreRenderedConversation(e){var t=v.a.getState().conversations,n=void 0===t?{}:t,r=Object(A.a)([],["messages",_.b],n),a=Object(C.a)(r).slice(0,-1);return Object(m.c)(a,e).then(function(e){return N(e.data,!1),e})},T=function sendMessageForExistingConversation(e){return Object(m.a)(e).then(function(e){return N(e.data,!1),e})},y=function sendMessageForNewConversation(e){return Object(m.b)(e).then(function(e){return N(e.data,!0),e})},N=function onMessageSent(e,t){t||Object(O.g)(e),Object(O.m)(e)},R=n("aO/P"),x=n("LeE/"),w=n("z5yO"),M=n("MFhO"),k=n("0lfv"),D=n("K7i0"),P=n("jm9a"),V=n("da4L"),L=n("hm8b"),U=n("O0zU"),H=n("PjZB"),G=n("9xv8"),B=function updateLastMessage(e,t){if(e.conversations[t.conversationId]){var n=e.conversations[t.conversationId].lastMessage;(!n||Object(V.b)(t)>=Object(V.b)(n))&&(e.conversations[t.conversationId].lastMessage=t)}},F={SEND_MESSAGE:function sendMessageHandler(e){var t=e.action,n=e.draft,r=t.payload.message.conversationId;0===r&&(r=_.b),Object(L.a)(r)&&(r=_.a),n.activeConversation=r,n.chatOpen=!0,n.messages[r]=Object(E.a)(Object(E.a)({},n.messages[r]||{}),{},Object(P.a)({},t.payload.message.attributes.widgetGuid,t.payload.message)),n.conversations[r]||(n.conversations[r]={conversation:{id:r}}),B(n,t.payload.message)},RECEIVE_MESSAGE_SENT:function receiveMessageSentHandler(e){var t=e.action,n=e.draft,r=t.payload,a=r.message,c=r.isNew,i=void 0!==c&&c,o=r.isPreRendered;if(i){var u=void 0!==o&&o?_.b:_.a;n.messages[a.conversationId]=Object(E.a)(Object(E.a)({},n.messages[u]),{},Object(P.a)({},a.attributes.widgetGuid,a)),n.conversations[a.conversationId]=Object(E.a)(Object(E.a)({},n.conversations[u]),{},{conversation:Object(E.a)(Object(E.a)({},n.conversations[u].conversation),{},{id:a.conversationId})}),delete n.conversations[u],delete n.messages[u]}n.endUserEngaged=!0,n.messages[a.conversationId]=Object(E.a)(Object(E.a)({},n.messages[a.conversationId]),{},Object(P.a)({},a.attributes.widgetGuid,a)),n.activeConversation=a.conversationId,n.conversations[a.conversationId]||(n.conversations[a.conversationId]={conversation:{id:a.conversationId}}),B(n,a)},RECEIVE_PRE_RENDERED_MESSAGES:function receivePreRenderedMessagesHandler(e){var t=e.action,n=e.draft,r=t.payload,a=r.messages,c=r.resumeFlowContext;if(a&&a.length){var i=a.map(function(e,t){return Object(E.a)(Object(E.a)({},e),{},{id:t})});n.messages[_.b]=i,n.unreadAgentMessages[_.b]=i.map(function(e){return e.id}),n.resumeFlowContext=c,n.activeConversation=_.b}},RECEIVE_AGENT_MESSAGE:function receiveAgentMessageHandler(e){var t=e.action,n=e.draft,r=t.payload.message;n.messages[r.conversationId]=Object(E.a)(Object(E.a)({},n.messages[r.conversationId]),{},Object(P.a)({},r.id,r)),n.activeConversation!==r.conversationId&&(n.activeConversation=r.conversationId),B(n,r)},RECEIVE_CONVERSATION:function receiveConversationHandler(e){var t=e.action,n=e.draft,r=t.payload.conversation;n.conversations[r.conversation.id]=r},RECEIVE_INITIAL_ACTIVE_CONVERSATION:function receiveInitialActiveConversationHandler(e){var t=e.action,n=e.draft;n.activeConversation=t.payload.conversation.conversation.id,n.conversations[t.payload.conversation.conversation.id]=t.payload.conversation},RECEIVE_MESSAGES_FOR_CONVERSATION:function receiveMessagesForConversationHandler(e){var t=e.action,n=e.draft,r=t.payload,a=r.messages,c=r.conversationId,i=r.hasMoreMessages,o=void 0!==i&&i,u=r.nextPageMessageId,s=void 0===u?null:u;n.messages[c]=Object(E.a)(Object(E.a)({},n.messages[c]),Object(G.a)(a)),n.conversations[c]=Object(E.a)(Object(E.a)({},n.conversations[c]),{},{hasMoreMessages:o,nextPageMessageId:s});var d=a.filter(function unreadAgentMessages(e){return e.viewerRecipientStatus!==H.f.READ&&e.authorType===H.b.USER&&!!e.body&&!!e.body.length}).map(function(e){return e.id});n.unreadAgentMessages[c]=d},RECEIVE_BULK_CONVERSATIONS:function receiveBulkConversationsHandler(e){var t=e.action,n=e.draft,r=t.payload.conversations.reduce(function(e,t){return e[t.conversation.id]=t,e},{});n.conversations=Object(U.a)(n.conversations,r)},SET_ACTIVE_CONVERSATION:function setActiveConversationHandler(e){var t=e.action;e.draft.activeConversation=t.payload.conversationId},CLEAR_ACTIVE_CONVERSATION:function clearActiveConversationHandler(e){e.draft.activeConversation=null},RECEIVE_READ_MESSAGES:function sendReadReceiptHandler(e){var t=e.action,n=e.draft,r=t.payload.conversationId;n.unreadAgentMessages[r]=[]},SET_UNREAD_MESSAGE:function setUnreadMessageHandler(e){var t=e.action,n=e.draft,r=t.payload.message;n.unreadAgentMessages[r.conversationId]?n.unreadAgentMessages[r.conversationId].push(r.id):n.unreadAgentMessages[r.conversationId]=[r.id]},RECEIVE_ATTACHMENTS:function receiveAttachments(e){var t=e.action,n=e.draft;n.attachments=Object(E.a)(Object(E.a)({},n.attachments),Object(k.a)(t.payload.attachments))},RECEIVE_IS_TYPING:function setIsTypingHandler(e){var t=e.action;e.draft.typingIndicators[t.payload.conversationId]=t.payload},SET_ACTIVE_DRIFTLINK:function setActiveDriftlinkHandler(e){var t=e.action;e.draft.activeDriftlink=t.payload},RECEIVE_AGENT_STATUS:function receiveAgentStatusHandler(e){var t=e.action,n=e.draft,r=t.payload,a=r.agentId,c=r.availability,i=r.lastActivity;n.agentPresence[a]={status:c,lastActivity:i}},RECEIVED_MATCHED_CONVO_ROUTING_RULES:function receiveMatchedConversationRoutingRulesHandler(e){var t=e.action;e.draft.matchedRoutingRules=t.payload},PERMACLOSE_CONVERSATION:function permacloseConversation(e){var t=e.action,n=e.draft,r=t.payload.conversationId;n.conversationStatus[r]=Object(E.a)(Object(E.a)({},n.conversationStatus[r]),{},{permaclosed:!0})},SET_HAS_FORCED_CONVERSATION:function setHasForcedConversationHandler(e){e.draft.hasForcedConversation=!0}},W=Object(i.b)({endUserEngaged:!1,activeConversation:null,activeDriftlink:null,attachments:{},conversations:{},conversationStatus:{},typingIndicators:{},agentMessagesFromCurrentSession:{},messages:{},unreadAgentMessages:{},matchedRoutingRules:[],agentPresence:{},resumeFlowContext:{},hasForcedConversation:!1},F),J=n("i9gz"),K=n("Jstd"),Y=n("vTYT"),$=n("Nlet"),z=n("7oto"),Z=n("EQxi"),Q=["drift.click","drift.me","drift.com","driftqa.com","driftqa.me","driftqa.click"];var q=n("FgEv"),X={configuration:{gates:[],dataProtection:{},theme:{awayMessage:null,welcomeMessage:null,team:[],userList:[],userListMode:void 0}}},ee={RECEIVE_EMBED_CONFIGURATION:function receiveEmbedConfigurationHandler(e){var t=e.action,n=e.draft;return Object(E.a)(Object(E.a)({},t.payload),{},{configuration:Object(E.a)(Object(E.a)({},n.configuration),t.payload.configuration)})},RECIEVE_EMBED_AWAY_MESSAGE:function receiveEmbedAwayMessageHandler(e){var t=e.action,n=e.draft,r=t.payload.message;void 0!==r&&r&&(n.configuration.theme.awayMessage=t.payload.message)},RECEIVE_EMBED_WELCOME_MESSAGE:function receiveEmbedWelcomeMessageHandler(e){var t=e.action,n=e.draft,r=t.payload,a=r.message,c=r.authorId;n.configuration.theme.welcomeMessage=a,c&&(n.configuration.autoAssigneeId=c)},RECEIVE_EMBED_CONFIGURATION_OVERRIDE:function receiveEmbedConfigurationOverrideHandler(e){var t=e.action,n=e.draft;n.configuration=Object(q.a)(n.configuration,t.payload)}},te=Object(i.b)(X,ee),ne={RECEIVE_IDENTITY_MAP:function receiveIdentityMapHandler(e){var t=e.action;e.draft;return t.payload}},re=Object(i.b)({},ne),ae=n("WwEg"),ce=n("0B8E"),ie=n("TbSn"),oe=n("U505"),ue={SET_HAS_SENT_IMPRESSION:function setHasSentImpressionHandler(e){e.draft.hasSentImpression=!0},RECEIVE_ACTIVE_CAMPAIGN:function receiveNewBotCampaignMessageHandler(e){var t=e.action,n=e.draft,r=Object(A.a)({},["data"],t.payload),a=Object(V.a)(r,"playbookId");n.active=Object(ce.a)([].concat(Object(ae.a)(n.active),[a]))},RECEIVE_INITIAL_ACTIVE_CONVERSATION:function receiveInitialActiveConversationHandler(e){var t=e.action,n=e.draft,r=Object(A.a)(null,["payload","conversation","conversation","id"],t);r&&(n.initialConversationId=r)},RECEIVE_MESSAGES_FOR_CONVERSATION:function receiveMessagesForConversationHandler(e){var t=e.action,n=e.draft,r=t.payload.messages,a=Object(ie.a)(t.payload.messages),c=Object(V.e)(a,"startInteraction"),i=Object(K.a)(function(e){return e.viewerRecipientStatus===H.f.READ},r);if(c&&i&&a.conversationId===n.initialConversationId){var o=Object(V.a)(a,"playbookId");n.passive=Object(ce.a)([].concat(Object(ae.a)(n.passive),[o]))}},REMOVE_TRIGGERABLE_CAMPAIGN_IMPRESSION:function removeTriggerableCampaignImpressionHandler(e){var t=e.action,n=e.draft,r=t.payload,a=r.source,c=r.playbookId;"active"===a?n.active=Object(oe.a)([c],n.active):"passive"===a&&(n.passive=Object(oe.a)([c],n.passive))}},se=Object(i.b)({hasSentImpression:!1,initialConversationId:null,active:[],passive:[]},ue),de={RECEIVE_INIT_TIMESTAMP:function receiveInitTimestampHandler(e){var t=e.action;e.draft.initTimestamp=t.payload},RECEIVE_SERVER_RESPONSE_SIZE:function receiveServerResponseSizeHandler(e){var t=e.action,n=e.draft,r=t.payload.size;n.loadCostInBytes+=r}},le=Object(i.b)({loadCostInBytes:0,initTimestamp:null},de),fe={IDENTIFY_LEAD:function identifyLeadHandler(e){var t=e.action;e.draft.endUser.email=t.payload},RECEIVE_GEO:function receiveGeoHandler(e){var t=e.action;e.draft.geo=t.payload},RECEIVE_ACCESS_TOKEN:function receiveAccessTokenHandler(e){var t=e.action;e.draft.auth.accessToken=t.payload.accessToken},RECEIVE_CHAT_SOCKET_AUTH:function receiveChatSocketAuthHandler(e){var t=e.action,n=e.draft;n.auth.socket=Object(E.a)(Object(E.a)({},n.auth.socket),{},{chat:t.payload})},RECEIVE_PRESENCE_SOCKET_AUTH:function receivePresenceSocketAuthHandler(e){var t=e.action,n=e.draft;n.auth.socket=Object(E.a)(Object(E.a)({},n.auth.socket),{},{visitor_presence:t.payload})},RECEIVE_SOCKET:function receiveSocketHandler(e){var t=e.action,n=e.draft,r=Object(A.a)(null,["payload","cluster"],t);r&&(n.sockets[r]={channels:{}})},RECEIVE_CHANNEL:function receiveChannelHandler(e){var t=e.action,n=e.draft,r=Object(A.a)(null,["payload","cluster"],t);r&&(n.sockets[r].channels[t.payload.key]=t.payload.channel)},RECEIVE_END_USER:function receiveEndUserHandler(e){var t=e.action,n=e.draft,r=!!t.payload.assignedAgentId;n.endUser=Object(E.a)(Object(E.a)({},n.endUser),t.payload.endUser),n.isOutbound=r,r&&(n.assignedAgentId=t.payload.assignedAgentId)},RECEIVE_EXTERNAL_ID:function receiveExternalIdHandler(e){var t=e.action;e.draft.endUser.externalId=t.payload},UPDATE_INSTANCE_ID:function updateInstanceIdHandler(e){var t=e.action;e.draft.instanceId=t.payload},RECEIVE_EXTERNAL_EMAIL:function receiveExternalEmailHandler(e){var t=e.action;e.draft.endUser.externalEmail=t.payload},RECEIVE_EXTERNAL_JWT:function receiveExternalJwtHandler(e){var t=e.action,n=e.draft;n.endUser.userJwt=t.payload,n.endUser.waitForUserJwt=!1},WAIT_FOR_EXTERNAL_JWT:function waitForExternalJwtHandler(e){e.action;e.draft.endUser.waitForUserJwt=!0},RECEIVE_GDPR:function receiveGDPRHandler(e){var t=e.action,n=e.draft;n.gdpr=Object(E.a)(Object(E.a)({},n.gdpr),t.payload)},RECEIVE_CONTEXT:function receiveContextHandler(e){var t=e.action;e.draft.context=t.payload},RECEIVE_SESSION:function receiveSessionHandler(e){var t=e.action,n=e.draft;n.id=t.payload.session.sessionId,n.sessionStarted=t.payload.session.sessionStarted,n.campaignRefreshToken=t.payload.session.campaignRefreshToken,n.instanceId=t.payload.session.instanceId},RECEIVE_COOKIE_DOMAIN:function receiveCookieDomainHandler(e){var t=e.action,n=e.draft,r=Object(A.a)(null,["payload","cookieDomain"],t);n.cookieDomain=r},RECEIVE_UPDATED_CAMPAIGN_REFRESH_TOKEN:function receiveUpdatedCampaignRefreshTokenHandler(e){var t=e.action;e.draft.campaignRefreshToken=t.payload}},Ee=Object(i.b)({geo:{},auth:{},sockets:{},endUser:{},isOutbound:!1,gdpr:{needsConsent:!0,hasConsent:!1},instanceId:"",id:null,sessionStarted:null,cookieDomain:"",context:{page:{},timezone:"",userAgent:"",locale:""}},fe),pe={UPDATE_ONLINE_STATUS:function updateOnlineStatusHandler(e){var t=e.action;e.draft.isOnline=t.payload},SET_SHOULD_SKIP_CAMPAIGNS:function setShouldSkipCampaignsHandler(e){var t=e.action;e.draft.skipCampaigns=t.payload},SET_SHOULD_FORCE_SHOW_WIDGET:function setShouldForceShowWidgetHandler(e){var t=e.action;e.draft.forceShowWidget=t.payload},SET_SHOULD_SKIP_WIDGET_TARGETING:function setShouldSkipWidgetTargetingHandler(e){var t=e.action;e.draft.skipWidgetTargeting=t.payload}},be=Object(i.b)({skipCampaigns:!1,skipWidgetTargeting:!1,forceShowWidget:!1,isOnline:!1},pe),ve=n("vjCh"),Oe=n("TDUE"),ge=n("Jg5f"),Ie={INIT_COMPLETE:function toggleInitCompleteHandler(e){var t=e.action;e.draft.initComplete=t.payload.initComplete},RECEIVE_MESSAGES_FOR_CONVERSATION:function receiveMessagesForConversationHandler(e){var t=e.action,n=e.draft,r=t.payload.messages;Object(K.a)(function(e){return Object(V.e)(e,"permacloseMessage")},r)&&(n.composerEnabled=!1)},TOGGLE_CHAT:function toggleChatHandler(e){var t=e.action;e.draft.chatOpen=t.payload.chatOpen},TOGGLE_CONVERSATION_HISTORY:function toggleConversationHistoryHandler(e){var t=e.action;e.draft.conversationHistoryOpen=t.payload.conversationHistoryOpen},TOGGLE_WIDGET_TARGETING_MATCHED:function toggleWidgetTargetingCompleteHandler(e){var t=e.action,n=e.draft,r=t.payload,a=r.matchedHours,c=r.matchedTargeting;Object(L.a)(a)||(n.matchedHours=a),Object(L.a)(c)||(n.matchedTargeting=c)}},me=Object(i.b)({chatOpen:!1,conversationHistoryOpen:!1,initComplete:!1,matchedHours:!1,matchedTargeting:!1},Ie),_e=n("9OUN"),je=n("Obtf");n.d(t,"b",function(){return Ce}),n.d(t,"a",function(){return Se});var Ae=Object(_e.c)({view:me,embed:te,metrics:le,session:Ee,targeting:be,conversations:W,campaigns:d,identity:re,impressions:se}),Ce=function rootReducer(e,t){return"REPLACE_STATE"===t.type&&(e=t.payload.currentState),Ae(e,t)},Se=Object(je.a)(function onToggleChatEpic(e){return e.pipe(Object(i.c)("TOGGLE_CHAT"),Object(w.a)(function(){return"controller"===v.a.name}),Object(a.a)(function(e){var t=e.payload;Object(O.d)(t.chatOpen)}),Object(c.a)())},function onCloseChatCompleteCampaignEpic(e){return e.pipe(Object(i.c)("TOGGLE_CHAT"),Object(w.a)(function(){return"controller"===v.a.name}),Object(w.a)(function(e){return!e.payload.chatOpen}),Object(ge.a)(function(){return function activeCampaign(e){return e.campaigns.activeCampaign}(v.a.getState())}),Object(w.a)(function(e){return!!e}),Object(w.a)(function(e){return Object(A.a)(null,["attributes","campaignDisplayType"],e)===M.a.WELCOME_MESSAGE}),Object(a.a)(function(e){var t=Object(A.a)(null,["id"],e),n=Object(A.a)(null,["attributes","playbookId"],e);Object(ve.g)(t,n),Object(Oe.c)(n)}),Object(c.a)())},function sendMessageEpic(e,t){return e.pipe(Object(i.c)("SEND_MESSAGE"),Object(w.a)(function(){return"controller"===v.a.name}),Object(a.a)(function(){var e=Object(p.a)(f.a.mark(function _callee(e){var n,r,a,c,i,o,u,s,d,l,p;return f.a.wrap(function _callee$(f){for(;;)switch(f.prev=f.next){case 0:return n=e.payload,r=Object(A.a)(null,["activeCampaign"],t.value.campaigns),a=Object(g.c)(),c=t.value.conversations.activeConversation,i=Object(j.c)(c),o=function defaultAttributes(){var e=t.value.campaigns.campaignEvalId,n=r.id,c=r.attributes.campaignDisplayType,i=Object(A.a)([],["matchedRoutingRules"],t.value.conversations),o=c===M.a.WELCOME_MESSAGE,u=i.map(function(e){return e.id}),s=i.length?Object(R.a)(Object(x.a)(function(e){return e.priority}),i[0],i):null;return Object(E.a)(Object(E.a)(Object(E.a)(Object(E.a)(Object(E.a)(Object(E.a)(Object(E.a)({},a?{locale:a}:{}),e?{targetingEvalUUID:e}:{}),s?{targetingRuleId:s.id}:{}),u.length?{targetingRuleIds:u}:{}),n?{campaignId:n,relatedCampaignId:n,isExpandable:!0}:{}),o?{relatedCampaignId:n}:{}),{},{integrations:Object(I.c)()})},u=function getConversationId(){var e=Object(A.a)(!1,["attributes","liveViewInitiated"],r),t=Object(A.a)(null,["attributes","conversationId"],r);return e?t:!i&&c?c:void 0},s=Object(E.a)(Object(E.a)({},n.message),{},{conversationId:u(),attributes:Object(E.a)(Object(E.a)(Object(E.a)({},n.message.attributes?n.message.attributes:{}),o()),i?t.value.conversations.resumeFlowContext:{})}),f.prev=8,f.next=11,S(s);case 11:d=f.sent,l=d.data,v.a.dispatch(Object(D.i)({message:l,isPreRendered:i,isNew:!n.message.conversationId})),f.next=20;break;case 16:f.prev=16,f.t0=f.catch(8),(p=Object(A.a)(null,["response","status"],f.t0))&&403===p||Object(k.e)(new Error("Failed To send message"),f.t0);case 20:case"end":return f.stop()}},_callee,null,[[8,16]])}));return function(t){return e.apply(this,arguments)}}()),Object(c.a)())},function receiveMessageSentEpic(e,t){return e.pipe(Object(i.c)("RECEIVE_MESSAGE_SENT"),Object(w.a)(function(){return"controller"===v.a.name}),Object(a.a)(function(e){var t=e.payload.message;Object(j.a)(t)||Object(O.e)(t)}),Object(c.a)())},function onReceiveEmbedEpic(e,t){return e.pipe(Object(i.c)("RECEIVE_EMBED_CONFIGURATION"),Object(w.a)(function(){return"controller"===v.a.name}),Object(a.a)(function(e){e.payload,function handleFrameAlignment(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0)||Object(g.f)();e===Y.a.LEFT&&Object(z.a)({topic:"align-frames",message:{alignment:e}})}(),function isWhitelistedUrl(){var e=Object($.c)().url,t=Object(A.a)([],["embed","configuration","theme","urlWhitelist"],v.a.getState());if(Object(J.a)(t))return!0;if(Object(K.a)(function(t){return e.includes(t)})(Q))return!0;var n=t.map(function(e){return Object(Z.c)(e)});return!!Object(K.a)(function(t){return e.includes(t)})(n)||(console.warn("The Drift widget is not allowed to load on this domain: ".concat(e)),!1)}()||(Object(z.a)({topic:"destroy-drift"}),Object(k.e)(new Error("NO ACCESS ON THIS DOMAIN")))}),Object(c.a)())},function pushToChannelEpic(e,t){return e.pipe(Object(i.c)("PUSH_TO_CHANNEL"),Object(a.a)(function(e){var n=e.meta,r=e.payload,a=n||{},c=a.clusterName,i=a.channelName,o=a.eventName;if(o&&c&&i){var u=Object(A.a)(null,["session","sockets",c,"channels",i],t.value);u&&u.push(o,r)}}),Object(c.a)())},function updateEndUserEmailEpic(e,t){return e.pipe(Object(i.c)("IDENTIFY_LEAD"),Object(w.a)(function(){return"controller"===v.a.name}),Object(a.a)(function(){var e=Object(p.a)(f.a.mark(function _callee(e){var t;return f.a.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.email,n.next=3,Object(I.d)({email:t});case 3:Object(O.h)({email:t});case 4:case"end":return n.stop()}},_callee)}));return function(t){return e.apply(this,arguments)}}()),Object(c.a)())},function onReceiveEmbedOverrideEpic(e,t){return e.pipe(Object(i.c)("RECEIVE_EMBED_CONFIGURATION_OVERRIDE"),Object(w.a)(function(){return"controller"===v.a.name}),Object(a.a)(function(e){var t=e.payload;Object(L.a)(t.verticalOffset)||"number"!==typeof t.verticalOffset||Object(z.a)({topic:"update-frame-vertical-offset",message:{offset:t.verticalOffset}})}),Object(c.a)())},function checkPermacloseConversationEpic(e,t){return e.pipe(Object(i.c)("SET_ACTIVE_CONVERSATION"),Object(w.a)(function(){return"controller"===v.a.name}),Object(a.a)(function(){var e=Object(p.a)(f.a.mark(function _callee2(e){var n,r,a;return f.a.wrap(function _callee2$(c){for(;;)switch(c.prev=c.next){case 0:if(!((n=e.payload.conversationId)<0)){c.next=3;break}return c.abrupt("return");case 3:if(!Object(A.a)(!1,["conversations","conversationStatus",n,"permaclosed"],t.value)){c.next=6;break}return c.abrupt("return");case 6:return c.next=8,Object(b.e)(n);case 8:r=c.sent,void 0!==(a=r.data.sentMessage)&&a&&v.a.dispatch(Object(D.b)({conversationId:n}));case 12:case"end":return c.stop()}},_callee2)}));return function(t){return e.apply(this,arguments)}}()),Object(c.a)())},function resizeControllerAfterCampaignClear(e,t){return e.pipe(Object(i.c)("CLEAR_ACTIVE_CAMPAIGN"),Object(a.a)(function(){var e=t.value.view;(void 0===e?{}:e).matchedTargeting||Object(r.a)()}),Object(c.a)())})},bYXQ:function(e,t,n){"use strict";n.d(t,"c",function(){return u}),n.d(t,"b",function(){return s}),n.d(t,"a",function(){return d});var r=n("QtlZ"),a=n("+/Je"),c=n("LVcX"),i=n("DboL"),o=n("PjZB"),u=function isPrerenderedConversation(e){return e===a.b},s=function isNewConversation(e){return e===a.a},d=function conversationHasEndUserMessage(e){var t=Object(c.a)(null,["conversations","messages",e.conversationId.toString()],r.a.getState());return t&&Object(i.a)(t).some(function(t){return t.authorType!==o.b.USER&&!!t.body&&t.id!==e.id})}},da4L:function(e,t,n){"use strict";n.d(t,"k",function(){return g}),n.d(t,"l",function(){return I}),n.d(t,"m",function(){return m}),n.d(t,"d",function(){return j}),n.d(t,"g",function(){return A}),n.d(t,"i",function(){return C}),n.d(t,"a",function(){return S}),n.d(t,"e",function(){return h}),n.d(t,"h",function(){return T}),n.d(t,"j",function(){return y}),n.d(t,"n",function(){return x}),n.d(t,"c",function(){return w}),n.d(t,"b",function(){return M}),n.d(t,"f",function(){return k});var r=n("nfbA"),a=n("8lq6"),c=n("oQJ1"),i=n("dMPp"),o=n("yzXs"),u=n("YsSj"),s=n("DboL"),d=n("RhEL"),l=n("CDfd"),f=n("hm8b"),E=n("LVcX"),p=n("Ry6R"),b=(n("Jstd"),n("A5mO")),v=n("PjZB"),O=n("0lfv"),g=Object(a.a)([Object(c.a)(Object(i.a)("createdAt"))]),I=function shouldReceiveMessage(e){var t=e.contentType===v.c.CHAT&&(!!e.body.length||!!e.attributes.appointmentInfo||!!e.attributes.startInteraction),n=e.contentType===v.c.EMAIL_CAPTURE_CARD,r=e.attachments&&e.attachments.length>0,a=y(e)||N(e);return t||n||r||a},m=Object(o.a)(Object(u.a)(I),g,s.a),_=function shouldGroupMessages(e,t){return C(e)&&C(t)||Object(d.a)(e.authorType,t.authorType)&&Object(d.a)(e.authorId,t.authorId)&&Object(b.a)(t.attributes.generatedAt||t.createdAt).isBefore(Object(b.a)(e.attributes.generatedAt||e.createdAt).add(2,"hour"))},j=function groupMessages(e){return Object(l.a)(_,e)},A=function isEmptyMessage(e){return!e||!e.replace(/<\/?p[^>]*>/g,"").trim()},C=function isMeetingScheduleMessage(e){var t=e.attributes,n=t.offerSchedule,r=t.presentSchedule,a=t.scheduleMeetingFlow,c=t.appointmentInfo;return!Object(f.a)(n)||!Object(f.a)(r)||!Object(f.a)(a)||!Object(f.a)(c)},S=function getMessageAttribute(e,t){return Object(E.a)(null,["attributes",t],e)},h=function hasMessageAttribute(e,t){return!!S(e,t)},T=function isEndUserMessage(e){return!!e&&(e.authorType===v.b.LEAD||e.authorType===v.b.END_USER)},y=function isRateConversationCTAMessage(e){return"BOT_CONVERSATION_RATING"===e.contentType&&e.authorType===v.b.USER&&h(e,"ratingPrompt")},N=function isConversationRatingMessage(e){return"BOT_CONVERSATION_RATING"===e.contentType&&h(e,"conversationRating")},R=function truncateMessageText(e){return Object(p.a)(100,e)[0].trim()},x=function truncateMessagePreview(e,t){var n=S(e,"preview");if(n&&n.length>t){var a=R(n);return Object(r.a)(Object(r.a)({},e),{},{attributes:Object(r.a)(Object(r.a)({},e.attributes),{},{preview:"".concat(a,"...")})})}return e},w=function getMessagePreviewText(e){return"BOT_CONVERSATION_RATING"===e.contentType?R(S(e,"ratingPrompt").ratingPromptMessage):S(e,"preview")},M=function getMessageCreatedAt(e){return e.createdAt||S(e,"generatedAt")},k=function isButtonsOnlyMessage(e){return!!e&&!T(e)&&!!S(e,"isButtonOnly")&&!Object(O.j)(S(e,"buttons"))}},gG69:function(e,t,n){"use strict";var r,a,c,i;n.d(t,"c",function(){return r}),n.d(t,"a",function(){return c}),n.d(t,"b",function(){return i}),function(e){e.NONE="NONE",e.GDPR="GDPR",e.LIVE_CHAT="LIVE_CHAT",e.ACTIVE_PLAYBOOK="ACTIVE_PLAYBOOK",e.PASSIVE_PLAYBOOK="PASSIVE_PLAYBOOK",e.CALENDAR_DROP="CALENDAR_DROP"}(r||(r={})),function(e){e.EVERYONE="EVERYONE",e.PREVIOUS="PREVIOUS",e.SEGMENT="SEGMENT",e.USERS="USERS",e.NONE="NONE"}(a||(a={})),function(e){e.MATCH="MATCH",e.NO_MATCH="NO_MATCH",e.POTENTIAL_MATCH="POTENTIAL_MATCH"}(c||(c={})),function(e){e.EVALUATED="EVALUATED",e.PENDING="PENDING"}(i||(i={}))},"l+Xe":function(e,t,n){"use strict";var r=n("LeJ0"),a=n("QtlZ"),c=function computeWSShardId(e){return e%50};n.d(t,"b",function(){return i}),n.d(t,"d",function(){return o}),n.d(t,"c",function(){return u}),n.d(t,"a",function(){return s});var i=function encodeData(e){return Object.keys(e).map(function(t){var n=e[t];return"object"===typeof n&&(n=JSON.stringify(n)),"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n))}).join("&")},o=function resolveWSAPIBase(e){return"LOCAL"===r.a.WS_USER_ENV?"".concat(r.a.WS_CHAT_BASE):"".concat(e,"-").concat(c(e),".").concat(r.a.WS_CHAT_BASE)},u=function resolvePresenceAPIBase(e){return"LOCAL"===r.a.WS_USER_ENV?"".concat(r.a.WS_PRESENCE_BASE):"".concat(c(e),".").concat(r.a.WS_LIVE_BASE)},s=function authInterceptor(e){var t=a.a.getState().session.auth.accessToken;return e.headers.Authorization=t?"Bearer ".concat(t):"",e}},pvgo:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("QtlZ"),a=n("4c+F"),c=n("CYoe"),i=function stashLoadRequestResponseSize(e){if(!r.a.getState().view.initComplete){var t=Object(a.b)(e);r.a.dispatch(Object(c.b)({size:t}))}}},qwiD:function(e,t,n){"use strict";n.d(t,"o",function(){return a}),n.d(t,"h",function(){return c}),n.d(t,"e",function(){return i}),n.d(t,"g",function(){return o}),n.d(t,"p",function(){return u}),n.d(t,"r",function(){return s}),n.d(t,"f",function(){return d}),n.d(t,"j",function(){return l}),n.d(t,"k",function(){return f}),n.d(t,"m",function(){return E}),n.d(t,"b",function(){return p}),n.d(t,"u",function(){return b}),n.d(t,"s",function(){return v}),n.d(t,"l",function(){return O}),n.d(t,"c",function(){return g}),n.d(t,"a",function(){return I}),n.d(t,"n",function(){return m}),n.d(t,"q",function(){return _}),n.d(t,"t",function(){return j}),n.d(t,"i",function(){return A}),n.d(t,"d",function(){return C});var r=n("Cpup"),a=function receiveGeo(e){return Object(r.a)({type:"RECEIVE_GEO",payload:e})},c=function receiveContext(e){return Object(r.a)({type:"RECEIVE_CONTEXT",payload:e})},i=function receiveAccessToken(e){return Object(r.a)({type:"RECEIVE_ACCESS_TOKEN",payload:e})},o=function receiveChatSocketAuth(e){return Object(r.a)({type:"RECEIVE_CHAT_SOCKET_AUTH",payload:e})},u=function receivePresenceSocketAuth(e){return Object(r.a)({type:"RECEIVE_PRESENCE_SOCKET_AUTH",payload:e})},s=function receiveSocket(e){return Object(r.a)({type:"RECEIVE_SOCKET",payload:e})},d=function receiveChannel(e){return Object(r.a)({type:"RECEIVE_CHANNEL",payload:e})},l=function receiveEndUser(e){return Object(r.a)({type:"RECEIVE_END_USER",payload:e})},f=function receiveExternalEmail(e){return Object(r.a)({type:"RECEIVE_EXTERNAL_EMAIL",payload:e})},E=function receiveExternalJwt(e){return Object(r.a)({type:"RECEIVE_EXTERNAL_JWT",payload:e})},p=function clearExternalJwt(){return E(null)},b=function waitForExternalJwt(){return Object(r.a)({type:"WAIT_FOR_EXTERNAL_JWT"})},v=function receiveUpdatedCampaignRefreshToken(e){return Object(r.a)({type:"RECEIVE_UPDATED_CAMPAIGN_REFRESH_TOKEN",payload:e})},O=function receiveExternalId(e){return Object(r.a)({type:"RECEIVE_EXTERNAL_ID",payload:e})},g=function identifyLead(e){return Object(r.a)({type:"IDENTIFY_LEAD",payload:e})},I=function clearExternalId(){return O(null)},m=function receiveGDPR(e){return Object(r.a)({type:"RECEIVE_GDPR",payload:e})},_=function receiveSession(e){return Object(r.a)({type:"RECEIVE_SESSION",payload:e})},j=function updateInstanceId(e){return Object(r.a)({type:"UPDATE_INSTANCE_ID",payload:e})},A=function receiveCookieDomain(e){return Object(r.a)({type:"RECEIVE_COOKIE_DOMAIN",payload:e})},C=function pushToChannel(e,t,n,a){return Object(r.a)({type:"PUSH_TO_CHANNEL",meta:{clusterName:e,channelName:t,eventName:n},payload:a})}},t8ds:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return s});var r=n("mj2O"),a=n.n(r),c=n("7SM1"),i=n("7oto"),o=function storageFactory(e){var t=function(){var t=Object(c.a)(a.a.mark(function _callee(t,n){return a.a.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(i.a)({topic:"storage",message:{type:e,method:t,args:n}}));case 1:case"end":return r.stop()}},_callee)}));return function broadcastToHost(e,n){return t.apply(this,arguments)}}();return{get:function get(e){return t("get",[e])},set:function set(e,n){t("set",[e,n])},removeItem:function removeItem(e){t("removeItem",[e])},clear:function clear(){t("clear",[])},key:function key(e){t("key",[e])},getAll:function getAll(){return t("getAll",[])},sadd:function sadd(e,n){t("sadd",[e,n])},srem:function srem(e,n){t("srem",[e,n])},sismember:function sismember(e,n){return t("sismember",[e,n])}}},u=o("localStorage"),s=o("sessionStorage")},vjCh:function(e,t,n){"use strict";var r=n("mj2O"),a=n.n(r),c=n("7SM1"),i=n("nfbA"),o=n("xXFf"),u=n("QtlZ"),s=n("Wjfv"),d=n("K7i0"),l=n("SFoa"),f=n("y0Ar"),E=n("TDUE"),p=n("da4L"),b=n("mfas"),v=n("LVcX"),O=n("MFhO"),g=n("PjZB"),I=n("0lfv"),m=n("9ttK");n.d(t,"a",function(){return _}),n.d(t,"b",function(){return j}),n.d(t,"g",function(){return A}),n.d(t,"f",function(){return C}),n.d(t,"c",function(){return S}),n.d(t,"e",function(){return h}),n.d(t,"d",function(){return y});var _=function assignActiveCampaignFromEmbed(e,t){var n=Object(m.a)(e,["displayType"]),r={id:e.id,attributes:Object(i.a)(Object(i.a)({},e.attributes),{},{message:t,campaignId:e.id,campaignDisplayType:n})};u.a.dispatch(Object(s.b)({data:r}))},j=function assignActiveCampaignFromMessage(e){var t=Object(p.a)(e,"campaignId");if(!t&&Object(p.e)(e,"startInteraction")){var n=Object(p.a)(e,"startInteraction");t=Object(l.a)(n)}var r=Object(b.a)(["attributes"],e),a={id:t,attributes:e.attributes||{},message:r};u.a.dispatch(Object(s.b)({data:a}))},A=function(){var e=Object(c.a)(a.a.mark(function _callee(e,t){var n;return a.a.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,N(e);case 4:if(n=y(e),Object(m.a)(n,["campaignReenrollmentType"],null)!==O.b.ALWAYS){r.next=10;break}return r.next=9,Object(E.c)(t);case 9:return r.abrupt("return");case 10:case"end":return r.stop()}},_callee)}));return function storeAnnouncementCampaignCompleted(t,n){return e.apply(this,arguments)}}(),C=function showUnreadCampaign(e){var t=u.a.getState(),n=t.conversations,r=void 0===n?{}:n,a=t.campaigns,c=void 0===a?{}:a,i=r.activeDriftlink;if(!c.activeCampaign.id&&!i){var o=function getUnreadCampaignsById(){var e=u.a.getState().campaigns.unreadCampaigns,t={},n=!0,r=!1,a=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var o=c.value,s=Object(v.a)(null,["conversation","campaignId"],o);if(!s)return null;t[s]=o}}catch(d){r=!0,a=d}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return t}()[e];if(o){var s=o.conversation,l=void 0===s?{}:s,E=o.messages,b=void 0===E?[]:E,O=b[0],g=Object(p.a)(O,"playbookId"),I=Object(p.a)(O,"interactionId");u.a.dispatch(Object(d.g)({conversation:{conversation:l}})),u.a.dispatch(Object(d.j)({conversationId:l.id,messages:b})),u.a.dispatch(Object(d.n)({conversationId:l.id})),j(O),Object(f.a)({playbookId:g,interactionId:I})}}},S=function evaluateCampaignConversations(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=T(e);u.a.dispatch(Object(s.e)(t))},h=function getUnreadCampaignIds(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return T(e).map(function(e){return e.conversation.campaignId})},T=function getUnreadCampaigns(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.filter(function(e){return function isBotCampaign(e){return"CHAT"===Object(v.a)(null,["conversation","type"],e)}(e)&&function isFirstMessageUnread(e){var t=e.messages.filter(function(e){return""!==e.body});return Object(v.a)(null,[0,"viewerRecipientStatus"],t)!==g.f.READ}(e)})},y=function getCampaignFromEmbedById(e){return Object(v.a)([],["embed","configuration","campaigns"],u.a.getState()).filter(function(t){return t.id===e})[0]},N=function(){var e=Object(c.a)(a.a.mark(function _callee2(e){var t,n,r,c;return a.a.wrap(function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return t=u.a.getState(),n=t.session,r=void 0===n?{}:n,a.prev=1,c=Object(v.a)(null,["endUser","id"],r),a.next=5,Object(o.d)({endUserId:c,campaignId:e,sessionId:r.campaignRefreshToken});case 5:return a.abrupt("return",a.sent);case 8:return a.prev=8,a.t0=a.catch(1),Object(I.e)("Failed to persist campaign interaction: ".concat(a.t0.message)),a.abrupt("return",null);case 12:case"end":return a.stop()}},_callee2,null,[[1,8]])}));return function triggerCampaignInteractionEvent(t){return e.apply(this,arguments)}}()},wNJw:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("7oto"),a=function createEvent(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&e.length&&Object(r.a)({topic:"create-event",message:{name:e,meta:t}})}},y0Ar:function(e,t,n){"use strict";var r=n("QtlZ"),a=n("Cpup"),c=n("gG69"),i=n("TDUE");n.d(t,"a",function(){return o});var o=function sendPlaybookImpression(e){var t=e.playbookId,n=e.interactionId,o=e.conversationId,u=e.isVirtual,s=void 0!==u&&u,d=e.isDelayed,l=void 0!==d&&d,f=r.a.getState().impressions,E=f.active,p=void 0===E?[]:E,b=f.passive,v=void 0===b?[]:b,O=p.includes(t),g=v.includes(t);(O||g)&&(Object(i.d)(O?c.c.ACTIVE_PLAYBOOK:c.c.PASSIVE_PLAYBOOK,{playbookId:t,interactionId:n,conversationId:o,virtual:s,isDelayed:l})&&r.a.dispatch(function removeTriggerableCampaignImpression(e){return Object(a.a)({type:"REMOVE_TRIGGERABLE_CAMPAIGN_IMPRESSION",payload:e})}({source:O?"active":"passive",playbookId:t})))}},z8Kx:function(e,t,n){"use strict";var r=n("mj2O"),a=n.n(r),c=n("7SM1"),i=n("QtlZ"),o=n("2PAb"),u=n("qwiD"),s=n("LVcX"),d=n("8saY"),l=n("0lfv"),f=n("VYE+"),E=n("WSu0"),p=n.n(E),b=n("l6A5"),v=n("rAc1"),O=Object(b.a)(v.a,function(e){try{return p()(e)}catch(t){return console.error("Unable to decode jwt",t),null}}),g=function isJwtExpired(e){var t=O(e);if(e&&!t)return!0;if(!t)return console.warn("decodedJwt is not defined"),!1;if("undefined"===typeof t.exp)return!1;var n=Date.now().valueOf()/1e3;return t.exp<n},I=Object(b.a)(v.a,function(e){if(e){var t=O(e);return Object(s.a)(null,["sub"],t)}return null}),m=function jwtIdMatchesExternalId(e,t){return!(!e||!t)&&(!g(e)&&I(e)===t)};n.d(t,"b",function(){return R}),n.d(t,"e",function(){return x}),n.d(t,"d",function(){return w}),n.d(t,"c",function(){return M}),n.d(t,"a",function(){return k});var _=function getExternalId(){var e=i.a.getState().session;return Object(s.a)(null,["endUser","externalId"],e)},j=function(){var e=Object(c.a)(a.a.mark(function _callee(){var e,t;return a.a.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(f.e)(o.e);case 2:return e=n.sent,n.next=5,Object(f.e)(o.d);case 5:if(t=n.sent,!e){n.next=9;break}return Object(f.g)(o.d,e),n.abrupt("return",e);case 9:return n.abrupt("return",t||null);case 10:case"end":return n.stop()}},_callee)}));return function getExternalIdFromCookie(){return e.apply(this,arguments)}}(),A=function setExternalIdCookie(e){Object(f.g)(o.d,e)},C=function(){var e=Object(c.a)(a.a.mark(function _callee2(){return a.a.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return i.a.dispatch(u.a()),e.next=3,Object(f.a)(o.d);case 3:if(!Object(f.d)()){e.next=6;break}return e.next=6,Object(f.a)(o.d,{domain:""});case 6:case"end":return e.stop()}},_callee2)}));return function clearExternalId(){return e.apply(this,arguments)}}(),S=function getUserJwt(){var e=i.a.getState().session;return Object(s.a)(null,["endUser","userJwt"],e)},h=function(){var e=Object(c.a)(a.a.mark(function _callee3(){var e;return a.a.wrap(function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.e)(o.f);case 2:if(!(e=t.sent)){t.next=10;break}if(!g(e)){t.next=9;break}return t.next=7,T();case 7:t.next=10;break;case 9:return t.abrupt("return",e);case 10:return t.abrupt("return",null);case 11:case"end":return t.stop()}},_callee3)}));return function getUserJwtFromCookie(){return e.apply(this,arguments)}}(),T=function(){var e=Object(c.a)(a.a.mark(function _callee4(){return a.a.wrap(function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)(o.f);case 2:if(!Object(f.d)()){e.next=5;break}return e.next=5,Object(f.a)(o.f,{domain:""});case 5:case"end":return e.stop()}},_callee4)}));return function clearUserJwtCookie(){return e.apply(this,arguments)}}(),y=function setUserJwtCookie(e){Object(f.g)(o.f,e)},N=function(){var e=Object(c.a)(a.a.mark(function _callee5(){return a.a.wrap(function _callee5$(e){for(;;)switch(e.prev=e.next){case 0:return i.a.dispatch(u.b()),e.next=3,T();case 3:case"end":return e.stop()}},_callee5)}));return function clearUserJwt(){return e.apply(this,arguments)}}(),R=function getExternalEmail(){var e=i.a.getState().session;return Object(s.a)("",["endUser","externalEmail"],e)},x=function(){var e=Object(c.a)(a.a.mark(function _callee6(){var e,t,n,r,c;return a.a.wrap(function _callee6$(a){for(;;)switch(a.prev=a.next){case 0:if(!(_()&&!S())){a.next=7;break}return e=_(),a.next=5,h();case 5:t=a.sent,m(t,e)?C():t&&N();case 7:if(n=null,r=null,a.t0=S(),a.t0){a.next=14;break}return a.next=13,h();case 13:a.t0=a.sent;case 14:if((c=a.t0)&&!g(c)&&(r=c),!r){a.next=21;break}y(r),n=I(r),a.next=28;break;case 21:if(a.t1=_(),a.t1){a.next=26;break}return a.next=25,j();case 25:a.t1=a.sent;case 26:(n=a.t1)&&(A(n),N());case 28:return a.abrupt("return",{externalId:n,userJwt:r});case 29:case"end":return a.stop()}},_callee6)}));return function resolveExternalIdAndUserJwt(){return e.apply(this,arguments)}}(),w=function(){var e=Object(c.a)(a.a.mark(function _callee7(){var e,t,n,r,c,o,u;return a.a.wrap(function _callee7$(a){for(;;)switch(a.prev=a.next){case 0:if(!M()){a.next=10;break}return e=i.a.getState(),t=e.session,n=void 0===t?{}:t,r=Object(s.a)(!1,["endUser","waitForUserJwt"],n),a.next=6,x();case 6:return c=a.sent,o=c.externalId,u=c.userJwt,a.abrupt("return",r&&!u&&!!o);case 10:return a.abrupt("return",!1);case 11:case"end":return a.stop()}},_callee7)}));return function isWaitingForUserJwt(){return e.apply(this,arguments)}}(),M=function isSignedIdentityRequired(){var e=i.a.getState().embed,t=void 0===e?{}:e;return Object(s.a)(d.c.DISABLED,["configuration","theme","signedIdentityRequiredStatus"],t)===d.c.REQUIRED},k=function(){var e=Object(c.a)(a.a.mark(function _callee8(e){var t,n,r,c,o,u;return a.a.wrap(function _callee8$(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.socketCluster,n=e.token,r=e.fn,!(c=Object(s.a)(null,["session","auth","socket","".concat(t)],i.a.getState()))){a.next=4;break}return a.abrupt("return",c);case 4:return a.next=6,r({access_token:n});case 6:if(o=a.sent,u=o.data){a.next=11;break}return Object(l.k)({type:"warn",data:["Empty payload response from ".concat(t," socket auth")]}),a.abrupt("return");case 11:return a.abrupt("return",u);case 12:case"end":return a.stop()}},_callee8)}));return function getAuthForSocketConnection(t){return e.apply(this,arguments)}}()}},[[0,5,25,11,24,12,13,31,29,6,3]]]);